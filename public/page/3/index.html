
<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <title>DD_XIEçš„å­¦ä¹ ç¬”è®°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="">
    <meta name="description" content="å‰ç«¯å­¦ä¹ ">
    
        <link rel="icon" href="/favicon.ico">
    
    
        
            <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
        
            <link rel="stylesheet" href="/css/stage.css">
        
            <link rel="stylesheet" href="/css/avatar-bg.css">
        
    
</head>
</html>
<body>
<header id="header">
    <div class="menu">
        <i class="fa fa-bars"></i>
    </div>
    <div class="header-main">
        <h1><a href="/">DD_XIEçš„å­¦ä¹ ç¬”è®°</a></h1>
    </div>
    <div id="nav">
        <div class="nav-img" id="nav-img"></div>
        <div class="sentences">
            å“ªæ€•è¦é€†ç€å…‰ï¼Œå°±é©±æ•£é»‘
        </div>
    </div>
</header>

<div id="content-outer">
    <div id="content-inner">
        <div class="clearfix">
    
    <div id="recent-posts">
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/23/æ—¶åºåŠ¨ç”»/">
                        æ—¶åºåŠ¨ç”»
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-23T08:39:42.000Z">
                            2019-08-23
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ArcGIS/">ArcGIS</a></li></ul>
                </div>
                
                    <h4 id="è¡¥å……1-2019-08-29"><a href="#è¡¥å……1-2019-08-29" class="headerlink" title="è¡¥å……1:2019-08-29"></a>è¡¥å……1:2019-08-29</h4><blockquote>
<p>å‘å¸ƒæœåŠ¡å‰ï¼Œè®¾ç½®æ—¶åŒº</p>
</blockquote>
<p><img src="/2019/08/23/æ—¶åºåŠ¨ç”»/02.png" alt="02.png"></p>
<p>æ•ˆæœå›¾ï¼š<br><img src="/2019/08/23/æ—¶åºåŠ¨ç”»/01.png" alt="01.png"></p>
<h4 id="æ­¥éª¤ä¸€ï¼šæ•°æ®å‡†å¤‡"><a href="#æ­¥éª¤ä¸€ï¼šæ•°æ®å‡†å¤‡" class="headerlink" title="æ­¥éª¤ä¸€ï¼šæ•°æ®å‡†å¤‡"></a>æ­¥éª¤ä¸€ï¼šæ•°æ®å‡†å¤‡</h4><p>æ‹–æ‹‰æœºæ•°æ®ï¼šæ—¶é—´2019/6/7 7:59:00-2019/6/713:52:00<br>ç›®æ ‡æ•°æ®ï¼šæ—¶é—´2019/6/7 8:00:00-2019/6/713:52:00 </p>
<p>æ³¨æ„ï¼šæ‰€æœ‰çš„æ•°æ®éœ€æ”¾åœ¨åœ°ç†æ•°æ®åº“é‡Œï¼Œå¦åˆ™æ—¥æœŸåçš„æ—¶åˆ†ç§’è¢«è‡ªåŠ¨æˆªå»åˆ é™¤ã€‚</p>
<h4 id="æ­¥éª¤äºŒï¼šåˆ¶å›¾è¡¨è¾¾"><a href="#æ­¥éª¤äºŒï¼šåˆ¶å›¾è¡¨è¾¾" class="headerlink" title="æ­¥éª¤äºŒï¼šåˆ¶å›¾è¡¨è¾¾"></a>æ­¥éª¤äºŒï¼šåˆ¶å›¾è¡¨è¾¾</h4><p>å°†æ‹–æ‹‰æœºæ•°æ®è½¬ä¸ºåˆ¶å›¾è¡¨è¾¾ï¼Œé‡æ–°ä¸ºRULEIDèµ‹å€¼ï¼Œè¿™é‡Œæˆ‘å…¨èµ‹å€¼ä¸º6ï¼Œä¸èƒ½èµ‹å€¼ä¸º0å“¦ã€‚<br>ç›®æ ‡æ•°æ®çº¿åˆ†ä¸ºäº”ä¸ªç­‰çº§ï¼Œå†è½¬ä¸ºåˆ¶å›¾è¡¨è¾¾ï¼ŒRULEIDæ˜¯å¦é‡æ–°èµ‹å€¼è§†æƒ…å†µè€Œå®šã€‚(èƒ½å¤Ÿæ»¡è¶³æ­¥éª¤å››çš„åˆ†çº§)</p>
<h4 id="æ­¥éª¤ä¸‰ï¼šåˆå¹¶merge"><a href="#æ­¥éª¤ä¸‰ï¼šåˆå¹¶merge" class="headerlink" title="æ­¥éª¤ä¸‰ï¼šåˆå¹¶merge"></a>æ­¥éª¤ä¸‰ï¼šåˆå¹¶merge</h4><p>å°†ä¸¤ä¸ªåˆ¶å›¾è¡¨è¾¾æ•°æ®åˆå¹¶ã€‚</p>
<h4 id="æ­¥éª¤å››ï¼šåˆ†çº§"><a href="#æ­¥éª¤å››ï¼šåˆ†çº§" class="headerlink" title="æ­¥éª¤å››ï¼šåˆ†çº§"></a>æ­¥éª¤å››ï¼šåˆ†çº§</h4><p>å°†æ­¥éª¤ä¸‰åˆå¹¶çš„æ–‡ä»¶è¿›è¡Œåˆ†çº§ï¼Œè¿™é‡Œåˆ†ä¸ºå…­çº§ï¼ˆåŒ…æ‹¬æ•´ä¸ªå›¾å±‚ï¼‰ï¼Œå…¶ä¸­ç¬¬å…­çº§ç”¨æ¥æ¸²æŸ“æ‹–æ‹‰æœºç¬¦å·ã€‚</p>
<h4 id="æ­¥éª¤äº”ï¼šå†æ¬¡åˆ¶å›¾è¡¨è¾¾"><a href="#æ­¥éª¤äº”ï¼šå†æ¬¡åˆ¶å›¾è¡¨è¾¾" class="headerlink" title="æ­¥éª¤äº”ï¼šå†æ¬¡åˆ¶å›¾è¡¨è¾¾"></a>æ­¥éª¤äº”ï¼šå†æ¬¡åˆ¶å›¾è¡¨è¾¾</h4><p>å°†åˆ†çº§åçš„æ–‡ä»¶å†æ¬¡åˆ¶ä½œåˆ¶å›¾è¡¨è¾¾ï¼Œå¯¹ç¬¬å…­çº§è¿›è¡Œç¬¦å·æ¸²æŸ“ã€‚</p>
<h4 id="æ­¥éª¤å…­ï¼šå°†æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“"><a href="#æ­¥éª¤å…­ï¼šå°†æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“" class="headerlink" title="æ­¥éª¤å…­ï¼šå°†æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“"></a>æ­¥éª¤å…­ï¼šå°†æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“</h4><h4 id="æ­¥éª¤ä¸ƒï¼šä»æ•°æ®åº“æ‹‰å»æ•°æ®è®¾ç½®timesliderå±æ€§ï¼Œå‘å¸ƒæœåŠ¡"><a href="#æ­¥éª¤ä¸ƒï¼šä»æ•°æ®åº“æ‹‰å»æ•°æ®è®¾ç½®timesliderå±æ€§ï¼Œå‘å¸ƒæœåŠ¡" class="headerlink" title="æ­¥éª¤ä¸ƒï¼šä»æ•°æ®åº“æ‹‰å»æ•°æ®è®¾ç½®timesliderå±æ€§ï¼Œå‘å¸ƒæœåŠ¡"></a>æ­¥éª¤ä¸ƒï¼šä»æ•°æ®åº“æ‹‰å»æ•°æ®è®¾ç½®timesliderå±æ€§ï¼Œå‘å¸ƒæœåŠ¡</h4><h4 id="æ­¥éª¤å…«ï¼šè°ƒç”¨æœåŠ¡"><a href="#æ­¥éª¤å…«ï¼šè°ƒç”¨æœåŠ¡" class="headerlink" title="æ­¥éª¤å…«ï¼šè°ƒç”¨æœåŠ¡"></a>æ­¥éª¤å…«ï¼šè°ƒç”¨æœåŠ¡</h4><p>ä½¿ç”¨åŠ¨æ€å›¾å±‚ï¼Œè¦ç´ æœåŠ¡è°ƒç”¨ï¼Œç¬¦å·ä¸æ¸²æŸ“ã€‚</p>
<h4 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=utf-8"</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"initial-scale=1, maximum-scale=1,user-scalable=no"</span>&gt;</span><br><span class="line">    &lt;title&gt;Recent Earthquakes&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://js.arcgis.com/3.29/dijit/themes/claro/claro.css"</span>&gt;</span><br><span class="line">    &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://js.arcgis.com/3.29/esri/css/esri.css"</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      html, body &#123;</span><br><span class="line">        height: 100%;</span><br><span class="line">        width: 100%;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 0;</span><br><span class="line">      &#125;</span><br><span class="line">      .dijitBorders&#123;</span><br><span class="line">        margin:5px 5px 5px 5px; </span><br><span class="line">        border:solid thin <span class="comment">#9CAA9C;</span></span><br><span class="line">       -moz-border-radius: 4px;</span><br><span class="line">      &#125;</span><br><span class="line">      .labelText&#123;</span><br><span class="line">        color:<span class="comment">#9CAA9C;</span></span><br><span class="line">        font-size:12pt;  </span><br><span class="line">        font-family:<span class="string">"Tahoma"</span>;</span><br><span class="line">        margin:5px;</span><br><span class="line">      &#125;</span><br><span class="line">      .headerText&#123;</span><br><span class="line">        color:<span class="comment">#9CAA9C;</span></span><br><span class="line">        font-size:16pt;</span><br><span class="line">        font-weight:bold;</span><br><span class="line">        font-family: <span class="string">"Tahoma"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=<span class="string">"https://js.arcgis.com/3.29/"</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      var map,timeExtent;</span><br><span class="line">      require([</span><br><span class="line">        <span class="string">"esri/map"</span>,<span class="string">"esri/layers/ArcGISDynamicMapServiceLayer"</span>, <span class="string">"esri/layers/FeatureLayer"</span>, <span class="string">"esri/TimeExtent"</span>, <span class="string">"esri/layers/TimeInfo"</span>,</span><br><span class="line">        <span class="string">"esri/renderers/ClassBreaksRenderer"</span>,</span><br><span class="line">        <span class="string">"esri/symbols/SimpleMarkerSymbol"</span>, <span class="string">"esri/symbols/SimpleLineSymbol"</span>,</span><br><span class="line">        <span class="string">"esri/dijit/editing/TemplatePicker"</span>, <span class="string">"esri/dijit/TimeSlider"</span>,</span><br><span class="line">        <span class="string">"esri/renderers/TimeClassBreaksAger"</span>, <span class="string">"esri/renderers/TemporalRenderer"</span>,</span><br><span class="line">        <span class="string">"dojo/parser"</span>, <span class="string">"dojo/_base/array"</span>, <span class="string">"esri/Color"</span>, <span class="string">"dojo/dom"</span>, <span class="string">"dojo/date"</span>,</span><br><span class="line">        </span><br><span class="line">        <span class="string">"dijit/layout/BorderContainer"</span>, <span class="string">"dijit/layout/ContentPane"</span>, <span class="string">"dojo/domReady!"</span></span><br><span class="line">      ], <span class="keyword">function</span>(</span><br><span class="line">        Map, ArcGISDynamicMapServiceLayer,FeatureLayer, TimeExtent, TimeInfo,</span><br><span class="line">        ClassBreaksRenderer,</span><br><span class="line">        SimpleMarkerSymbol, SimpleLineSymbol,</span><br><span class="line">        TemplatePicker, TimeSlider,</span><br><span class="line">        TimeClassBreaksAger, TemporalRenderer,</span><br><span class="line">        parser, arrayUtils, Color, dom, date</span><br><span class="line">      ) &#123;</span><br><span class="line">        parser.parse();</span><br><span class="line"></span><br><span class="line">        map = new Map(<span class="string">"map"</span>, &#123;</span><br><span class="line">          basemap: <span class="string">"satellite"</span>,</span><br><span class="line">          center: [114.0143, 34.11075],</span><br><span class="line">          slider: <span class="literal">false</span>,</span><br><span class="line">          zoom:15</span><br><span class="line">        &#125;);</span><br><span class="line">        //è¾¹ç•Œ</span><br><span class="line">          var research_scope = new ArcGISDynamicMapServiceLayer(<span class="string">"http://localhost:6080/arcgis/rest/services/Henan_S/research_scope1/MapServer"</span>,&#123;<span class="string">"id"</span>:<span class="string">"100000"</span>&#125;);</span><br><span class="line">        map.on(<span class="string">"load"</span>, mapLoaded);   </span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="function"><span class="title">mapLoaded</span></span>() &#123;</span><br><span class="line">            var SOMtlj = new ArcGISDynamicMapServiceLayer(<span class="string">"http://localhost:6080/arcgis/rest/services/Henan_S/PH1_TLJ/MapServer"</span>,&#123;<span class="string">"id"</span>:<span class="string">"3"</span>&#125;);</span><br><span class="line">            SOMtlj.on(<span class="string">"load"</span>, featureLayerLoaded);</span><br><span class="line">            map.addLayer(SOMtlj);</span><br><span class="line">            map.addLayer(research_scope);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="function"><span class="title">featureLayerLoaded</span></span>() &#123;</span><br><span class="line">          // create time slider</span><br><span class="line">          var timeSlider = new TimeSlider(&#123; style: <span class="string">"width: 100%;"</span>&#125;, dom.byId(<span class="string">"timeSliderDiv"</span>));</span><br><span class="line">          map.setTimeSlider(timeSlider);</span><br><span class="line"></span><br><span class="line">          timeExtent = new TimeExtent();</span><br><span class="line">          </span><br><span class="line">          // è®¾ç½®æ—¶åŒºåï¼Œå¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´</span><br><span class="line">          //timeExtent.startTime = new Date(<span class="string">"2019/06/06 23:59:00 UTC"</span>);</span><br><span class="line">          //timeExtent.endTime = new Date(<span class="string">"2019/06/07 05:52:00 UTC"</span>);</span><br><span class="line"></span><br><span class="line">          timeSlider.setThumbCount(1);</span><br><span class="line">          timeSlider.createTimeStopsByTimeInterval(timeExtent, 1, <span class="string">"esriTimeUnitsMinutes"</span>); </span><br><span class="line">        </span><br><span class="line">          timeSlider.setThumbIndexes([0]);</span><br><span class="line">          timeSlider.on(<span class="string">"time-extent-change"</span>, displayTimeInfo);</span><br><span class="line">          timeSlider.startup();</span><br><span class="line">           // timeSlider.play();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> displayTimeInfo(timeExtent) &#123;</span><br><span class="line">          var info = timeExtent.endTime;</span><br><span class="line">          dom.byId(<span class="string">"timeInfo"</span>).innerHTML = info;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body class=<span class="string">"claro"</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">"mainWindow"</span> </span><br><span class="line">         data-dojo-type=<span class="string">"dijit/layout/BorderContainer"</span> </span><br><span class="line">         data-dojo-propx=<span class="string">"design:'sidebar', gutters:true"</span> </span><br><span class="line">         style=<span class="string">"width:100%; height:100%;"</span>&gt;</span><br><span class="line">     &lt;div id=<span class="string">"header"</span> </span><br><span class="line">          data-dojo-type=<span class="string">"dijit/layout/ContentPane"</span> </span><br><span class="line">          data-dojo-props=<span class="string">"region:'top'"</span> </span><br><span class="line">          class=<span class="string">"dijitBorders"</span> style=<span class="string">"height:100px;"</span>&gt;</span><br><span class="line">      &lt;center&gt;</span><br><span class="line">        &lt;span class=<span class="string">"headerText"</span>&gt;é‡‡æ ·æ—¶åº&lt;/span&gt;</span><br><span class="line">        &lt;div id=<span class="string">"timeInfo"</span> class=<span class="string">"labelText"</span>&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div id=<span class="string">"timeSliderDiv"</span> &gt;&lt;/div&gt;</span><br><span class="line">      &lt;/center&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;div id=<span class="string">"map"</span> data-dojo-type=<span class="string">"dijit/layout/ContentPane"</span> </span><br><span class="line">           data-dojo-props=<span class="string">"region:'center'"</span> class=<span class="string">"dijitBorders"</span> </span><br><span class="line">           style=<span class="string">"background-color:inherit;"</span>&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;div id=<span class="string">"right"</span> data-dojo-type=<span class="string">"dijit/layout/ContentPane"</span> </span><br><span class="line">           data-dojo-props=<span class="string">"region:'left'"</span> </span><br><span class="line">           style=<span class="string">"width:100px;font-size:small;"</span>&gt;</span><br><span class="line"></span><br><span class="line">          &lt;center&gt;&lt;span class=<span class="string">"labelText"</span>&gt;Age&lt;/span&gt;&lt;/center&gt;</span><br><span class="line">          &lt;div id=<span class="string">"ageDiv"</span> class=<span class="string">"dijitBorders"</span>&gt;&lt;/div&gt;</span><br><span class="line">          &lt;center&gt;&lt;span class=<span class="string">"labelText"</span>&gt;Magnitude&lt;/span&gt;&lt;/center&gt;</span><br><span class="line">          &lt;div id=<span class="string">"magnitudeDiv"</span> class=<span class="string">"dijitBorders"</span> &gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      </span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

                
                <div class="readmore">
                    <a href="/2019/08/23/æ—¶åºåŠ¨ç”»/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/15/vuex/">
                        vuex
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-15T03:20:43.000Z">
                            2019-08-15
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Vue/">Vue</a></li></ul>
                </div>
                
                    <p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼<br>å¤§å‹é¡¹ç›®ï¼Œæ¶‰åŠå¤æ‚çš„äº¤äº’æ—¶ï¼Œç”¨vuex</p>

                
                <div class="readmore">
                    <a href="/2019/08/15/vuex/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/15/å°ç¨‹åº/">
                        å°ç¨‹åº
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-15T03:20:43.000Z">
                            2019-08-15
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/å°ç¨‹åº/">å°ç¨‹åº</a></li></ul>
                </div>
                
                    <h3 id="å¼€å‘å‰å‡†å¤‡"><a href="#å¼€å‘å‰å‡†å¤‡" class="headerlink" title="å¼€å‘å‰å‡†å¤‡"></a>å¼€å‘å‰å‡†å¤‡</h3><p>1ã€å¼€å‘è€…å·¥å…·ä¸‹è½½ã€‚ğŸ‘‰<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener">ä¸‹è½½</a><br>2ã€æ³¨å†Œç”³è¯·ç­‰ã€‚</p>
<h3 id="å°ç¨‹åºä¸»è¦æ–‡ä»¶åŠä½œç”¨"><a href="#å°ç¨‹åºä¸»è¦æ–‡ä»¶åŠä½œç”¨" class="headerlink" title="å°ç¨‹åºä¸»è¦æ–‡ä»¶åŠä½œç”¨"></a>å°ç¨‹åºä¸»è¦æ–‡ä»¶åŠä½œç”¨</h3><p><img src="/2019/08/15/å°ç¨‹åº/01.png" alt="01.png"></p>
<h3 id="ç»„ä»¶ä½¿ç”¨"><a href="#ç»„ä»¶ä½¿ç”¨" class="headerlink" title="ç»„ä»¶ä½¿ç”¨"></a>ç»„ä»¶ä½¿ç”¨</h3><p>è§å®˜ç½‘ã€‚ğŸ‘‰<a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html" target="_blank" rel="noopener">æ‰“å¼€</a></p>
<h3 id="å°ç¨‹åºå•ä½"><a href="#å°ç¨‹åºå•ä½" class="headerlink" title="å°ç¨‹åºå•ä½"></a>å°ç¨‹åºå•ä½</h3><p>ç‰©ç†å’Œé€»è¾‘åˆ†è¾¨ç‡è½¬æ¢</p>
<p>rpxï¼ˆresponsive pixelï¼‰: å¯ä»¥æ ¹æ®å±å¹•å®½åº¦è¿›è¡Œè‡ªé€‚åº”ã€‚è§„å®šå±å¹•å®½ä¸º750rpxã€‚å¦‚åœ¨ iPhone6 ä¸Šï¼Œå±å¹•å®½åº¦ä¸º375pxï¼Œå…±æœ‰750ä¸ªç‰©ç†åƒç´ ï¼Œåˆ™750rpx = 375px = 750ç‰©ç†åƒç´ ï¼Œ1rpx = 0.5px = 1ç‰©ç†åƒç´ ã€‚</p>
<h3 id="WXMLæ•°æ®ç»‘å®š"><a href="#WXMLæ•°æ®ç»‘å®š" class="headerlink" title="WXMLæ•°æ®ç»‘å®š"></a>WXMLæ•°æ®ç»‘å®š</h3><p>WXMLï¼ˆWeiXin Markup Languageï¼‰æ˜¯æ¡†æ¶è®¾è®¡çš„ä¸€å¥—æ ‡ç­¾è¯­è¨€ï¼Œç»“åˆåŸºç¡€ç»„ä»¶ã€äº‹ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æ„å»ºå‡ºé¡µé¢çš„ç»“æ„ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * é¡µé¢çš„åˆå§‹æ•°æ®</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½</span><br><span class="line">   */</span><br><span class="line">  onLoad: <span class="keyword">function</span> (options) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ</span><br><span class="line">   */</span><br><span class="line">  onReady: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º</span><br><span class="line">   */</span><br><span class="line">  onShow: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—</span><br><span class="line">   */</span><br><span class="line">  onHide: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½</span><br><span class="line">   */</span><br><span class="line">  onUnload: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ</span><br><span class="line">   */</span><br><span class="line">  onPullDownRefresh: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°</span><br><span class="line">   */</span><br><span class="line">  onReachBottom: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«</span><br><span class="line">   */</span><br><span class="line">  onShareAppMessage: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>æ³¨æ„:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;image src=<span class="string">"&#123;&#123;meurl&#125;&#125;"</span> show-menu-by-longpress=<span class="string">"&#123;&#123;true&#125;&#125;"</span>&gt;&lt;/image&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="æ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“</h3><p>wx:if  wx:elif wx:else<br>wx:for wx:for-index wx:for-item</p>
<h3 id="æ¨¡æ¿åŠå¼•å…¥"><a href="#æ¨¡æ¿åŠå¼•å…¥" class="headerlink" title="æ¨¡æ¿åŠå¼•å…¥"></a>æ¨¡æ¿åŠå¼•å…¥</h3><p>1.åˆ›å»ºå…¬ç”¨é¡µé¢template.wxml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template name=<span class="string">"header"</span>&gt;</span><br><span class="line">    &lt;view class=<span class="string">"header"</span>&gt;è¿™æ˜¯å¤´éƒ¨å†…å®¹&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template name=<span class="string">"footer"</span>&gt;</span><br><span class="line">    &lt;view class=<span class="string">"footer"</span>&gt;è¿™æ˜¯åº•éƒ¨å†…å®¹&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></p>
<p>2.å¼•å…¥åº”ç”¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wxml:</span><br><span class="line">&lt;import src=<span class="string">"/pages/template/template"</span>/&gt;</span><br><span class="line">wxss:</span><br><span class="line">@import <span class="string">"/pages/template/template"</span></span><br><span class="line"></span><br><span class="line">åº”ç”¨ï¼š&lt;template is=<span class="string">"header"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="äº‹ä»¶å¤„ç†åŠæ•°æ®äº¤äº’"><a href="#äº‹ä»¶å¤„ç†åŠæ•°æ®äº¤äº’" class="headerlink" title="äº‹ä»¶å¤„ç†åŠæ•°æ®äº¤äº’"></a>äº‹ä»¶å¤„ç†åŠæ•°æ®äº¤äº’</h3><p>1ã€å˜é‡ä¸æ˜¯ä¸€å®šè¦åˆå§‹åŒ–<br>2ã€setData({ })<br>3ã€bindtap<br>4ã€catchtap é˜»æ­¢å†’æ³¡äº‹ä»¶</p>
<h3 id="å°ç¨‹åºçš„å…¨å±€é…ç½®"><a href="#å°ç¨‹åºçš„å…¨å±€é…ç½®" class="headerlink" title="å°ç¨‹åºçš„å…¨å±€é…ç½®"></a>å°ç¨‹åºçš„å…¨å±€é…ç½®</h3><p>1ã€tabBarå¯¼èˆªæ é¡µé¢è·³è½¬<br><img src="/2019/08/15/å°ç¨‹åº/02.png" alt="02.png"></p>
<h3 id="ç‹¬ç«‹é¡µé¢é…ç½®"><a href="#ç‹¬ç«‹é¡µé¢é…ç½®" class="headerlink" title="ç‹¬ç«‹é¡µé¢é…ç½®"></a>ç‹¬ç«‹é¡µé¢é…ç½®</h3>
                
                <div class="readmore">
                    <a href="/2019/08/15/å°ç¨‹åº/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/13/node5/">
                        Express
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-13T03:07:47.000Z">
                            2019-08-13
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Node/">Node</a></li></ul>
                </div>
                
                    <h3 id="Expressæ¡†æ¶"><a href="#Expressæ¡†æ¶" class="headerlink" title="Expressæ¡†æ¶"></a>Expressæ¡†æ¶</h3><p>1.ä¾èµ–ä¸­é—´ä»¶<br>2.æ¥å—è¯·æ±‚<br>3.éç ´åå¼çš„<br>4.staticç”¨æ³•</p>
<h4 id="å®‰è£…ã€é…ç½®ã€æ¥å—è¯·æ±‚ã€å“åº”"><a href="#å®‰è£…ã€é…ç½®ã€æ¥å—è¯·æ±‚ã€å“åº”" class="headerlink" title="å®‰è£…ã€é…ç½®ã€æ¥å—è¯·æ±‚ã€å“åº”"></a>å®‰è£…ã€é…ç½®ã€æ¥å—è¯·æ±‚ã€å“åº”</h4><p>å®‰è£…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨</p>
<ul>
<li>åˆ›å»ºæœåŠ¡</li>
<li>ç›‘å¬</li>
<li>å¤„ç†è¯·æ±‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const express = require(<span class="string">'express'</span>);</span><br><span class="line">var server = express();</span><br><span class="line">server.use(<span class="string">'/a.html'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    res.send(<span class="string">'abc'</span>);                          //sendå’Œwriteç±»ä¼¼</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line">server.use(<span class="string">'/b.html'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    res.send(<span class="string">'123'</span>);</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(8080);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>expressä¿ç•™äº†åŸç”Ÿçš„åŠŸèƒ½ï¼Œæ·»åŠ äº†ä¸€äº›æ–¹æ³•ï¼Œå¢å¼ºåŸæœ‰çš„åŠŸèƒ½ã€‚</p>
<h4 id="3ç§æ–¹æ³•"><a href="#3ç§æ–¹æ³•" class="headerlink" title="3ç§æ–¹æ³•"></a>3ç§æ–¹æ³•</h4><p>get(å¤„ç†getè¯·æ±‚)\post(å¤„ç†postè¯·æ±‚)\use(get,postå‡å¯)ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const express = require(<span class="string">'express'</span>);</span><br><span class="line">var server = express();</span><br><span class="line">server.get(<span class="string">'/'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    console.log(<span class="string">'getè¯·æ±‚'</span>)</span><br><span class="line">&#125;);</span><br><span class="line">server.post(<span class="string">'/'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    console.log(<span class="string">'postè¯·æ±‚'</span>)</span><br><span class="line">&#125;);</span><br><span class="line">server.use(<span class="string">'/'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    console.log(<span class="string">'useäº†'</span>)</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(8080);</span><br></pre></td></tr></table></figure></p>
<h4 id="Express-static"><a href="#Express-static" class="headerlink" title="Express-static"></a>Express-static</h4><p>è¯»å–é™æ€æ–‡ä»¶<br>å®‰è£… npm install express-static -save</p>
<p>å®ä¾‹-ç™»å½•<br>a.html:<br><img src="/2019/08/13/node5/01.png" alt="01.png"><br>server.js<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const express = require(<span class="string">'express'</span>);</span><br><span class="line">const expressStatic = require(<span class="string">'express-static'</span>);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">server.listen(8080);</span><br><span class="line"></span><br><span class="line">//ç”¨æˆ·æ•°æ®æ¨¡æ‹Ÿ</span><br><span class="line">var users=&#123;</span><br><span class="line">    <span class="string">'blue'</span>:<span class="string">'123456'</span>,</span><br><span class="line">    <span class="string">'zhangsan'</span>:<span class="string">'654321'</span>,</span><br><span class="line">    <span class="string">'lisi'</span>:<span class="string">'987678'</span></span><br><span class="line">&#125;;</span><br><span class="line">server.get(<span class="string">'/login'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    // urlLib.parse(req.url,<span class="literal">true</span>).query;</span><br><span class="line">    console.log(req.query)</span><br><span class="line">    var user= req.query[<span class="string">'user'</span>];</span><br><span class="line">    var pass= req.query[<span class="string">'pass'</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(users[user]==null)&#123;</span><br><span class="line">        res.send(&#123;ok:<span class="literal">false</span>,mag:<span class="string">'æ­¤ç”¨æˆ·ä¸å­˜åœ¨'</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(users[user]!=pass)&#123;</span><br><span class="line">            res.send(&#123;ok:<span class="literal">false</span>,msg:<span class="string">'å¯†ç é”™äº†'</span>&#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.send(&#123;ok:<span class="literal">true</span>,mag:<span class="string">'æˆåŠŸ'</span>&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.use(expressStatic(<span class="string">'./www'</span>));</span><br></pre></td></tr></table></figure></p>
<h3 id="æ•°æ®è§£æ"><a href="#æ•°æ®è§£æ" class="headerlink" title="æ•°æ®è§£æ"></a>æ•°æ®è§£æ</h3><p>getè¯·æ±‚æ•°æ®è§£æ,æ— éœ€ä¸­é—´ä»¶:req.query<br>postè¯·æ±‚æ•°æ®è§£æï¼Œéœ€ä¸­é—´ä»¶ï¼šbody-parserï¼Œé¦–å…ˆè§£ææ•°æ®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const bodyParser = require(&apos;body-parser&apos;);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">server.listen(8080);</span><br><span class="line"></span><br><span class="line">server.use(bodyParser.urlencoded(&#123;</span><br><span class="line">    extended:true,      //æ‰©å±•æ¨¡å¼</span><br><span class="line">    limit: 2*1024       //é™åˆ¶2Mï¼Œé»˜è®¤100k</span><br><span class="line">&#125;));</span><br><span class="line">server.use(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">    console.log(req.body)  //POST</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="é“¾å¼æ“ä½œ"><a href="#é“¾å¼æ“ä½œ" class="headerlink" title="é“¾å¼æ“ä½œ"></a>é“¾å¼æ“ä½œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">server.listen(8080);</span><br><span class="line"></span><br><span class="line">//ç¬¬ä¸‰ä¸ªå‚æ•°</span><br><span class="line">server.use(&apos;/&apos;,function(req,res,next)&#123;</span><br><span class="line">    console.log(&apos;a&apos;)</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line">server.use(&apos;/&apos;,function(req,res.next)&#123;</span><br><span class="line">    console.log(&apos;b&apos;)  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¸­é—´ä»¶,ç±»ä¼¼â€™body-parserâ€™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const querystring = require(&apos;querystring&apos;);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">server.listen(8080);</span><br><span class="line"></span><br><span class="line">//ç¬¬ä¸‰ä¸ªå‚æ•°</span><br><span class="line">server.use(function(req,res,next)&#123;</span><br><span class="line">    var str=&apos;&apos;;</span><br><span class="line">    req.on(&apos;data&apos;,function(data)&#123;</span><br><span class="line">        str+=data;</span><br><span class="line">    &#125;);</span><br><span class="line">    req.on(&apos;end&apos;,function(data)&#123;</span><br><span class="line">        req.body=querystring(str);</span><br><span class="line">        next();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">server.use(&apos;/&apos;,function(req,res.next)&#123;</span><br><span class="line">    console.log(&apos;b&apos;)  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="cookieã€session"><a href="#cookieã€session" class="headerlink" title="cookieã€session"></a>cookieã€session</h3><ul>
<li>a.å‘é€cookie<br>res.cookie(åå­—,å€¼,maxAge:æ¯«ç§’,signed:true)</li>
<li>b.è¯»å–cookie<br>cookie-parser<br>server.use(cookieParser(â€˜ç§˜é’¥â€™))<br>server.use(function(){<br>  req.cookie   //æœªç­¾å<br>  req.signedCookies   //ç­¾åç‰ˆ<br>})</li>
<li>c.åˆ é™¤cookie<br>res.clearCookie(åå­—)</li>
</ul>
<p>ä¿å­˜æ•°æ®ï¼Œcookieæ•°æ®ä¿å­˜æµè§ˆå™¨ï¼Œsession æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ã€‚<br>npm install cookie-parser cookie-session<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const express = require(<span class="string">'express'</span>);</span><br><span class="line">const cookieParser = require(<span class="string">'cookie-parser'</span>);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">//å‘é€cookie</span><br><span class="line">server.use(<span class="string">'/aaa/a.html'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    res.cookie(<span class="string">'user'</span>,<span class="string">'blue'</span>,&#123;path:<span class="string">'/aaa'</span>,<span class="string">'maxAge'</span>:3*24*3600*1000&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">//è¯»å–cookie</span><br><span class="line">server.use(cookieParser())ï¼›</span><br><span class="line">server.use(<span class="string">'/'</span>,<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    console.log(req.cookie)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>å®ç°cookieåŠ å¯†ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const express = require(<span class="string">'express'</span>);</span><br><span class="line">const cookieParser = require(<span class="string">'cookie-parser'</span>);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">//cookieParser</span><br><span class="line">server.use(cookieParser);</span><br><span class="line">server.use(<span class="string">'/'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    req.secret=<span class="string">'hdwifbonfjfosdjhfsj'</span>;</span><br><span class="line">    res.cookie(<span class="string">'user'</span>,<span class="string">'blue'</span>,&#123;signed:<span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line">    res.send(<span class="string">'ok'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>session</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const express = require(<span class="string">'express'</span>);</span><br><span class="line">const cookieSession = require(<span class="string">'cookie-session'</span>);</span><br><span class="line"></span><br><span class="line">var server = express();</span><br><span class="line">//cookie</span><br><span class="line">server.use(cookieParser(<span class="string">'dnkfvbscsvius'</span>));</span><br><span class="line">server.use(cookieSession());</span><br><span class="line"></span><br><span class="line">server.use(<span class="string">'/'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    req.secret=<span class="string">'hdwifbonfjfosdjhfsj'</span>;</span><br><span class="line">    res.cookie(<span class="string">'user'</span>,<span class="string">'blue'</span>,&#123;signed:<span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line">    res.send(<span class="string">'ok'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(8080);</span><br></pre></td></tr></table></figure>
<h3 id="expressæ¡†æ¶æ•´åˆ"><a href="#expressæ¡†æ¶æ•´åˆ" class="headerlink" title="expressæ¡†æ¶æ•´åˆ"></a>expressæ¡†æ¶æ•´åˆ</h3><p><img src="/2019/08/13/node5/02.png" alt="02.png"><br><img src="/2019/08/13/node5/03.png" alt="03.png"></p>
<h4 id="multeræ¨¡å—ä¸Šä¼ æ–‡ä»¶"><a href="#multeræ¨¡å—ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="multeræ¨¡å—ä¸Šä¼ æ–‡ä»¶"></a>multeræ¨¡å—ä¸Šä¼ æ–‡ä»¶</h4><p>npm install multer</p>
<ul>
<li>body-parser:è§£æpostæ•°æ®  (application/x-form-urlencoded)<br>server.use(bodyParse.urlencode());</li>
<li>multer:è§£æpostæ–‡ä»¶   (multipart/form-data)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">//ä¸Šä¼ åˆ°ç£ç›˜  é‡å‘½å</span><br><span class="line"></span><br><span class="line">const multer = require(<span class="string">'multer'</span>);</span><br><span class="line">const pathLib = require(<span class="string">'path'</span>);</span><br><span class="line">const fs = require(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//1ã€pathLibè§£æè·å–åŸå§‹æ–‡ä»¶æ‰©å±•å</span><br><span class="line">    var str=<span class="string">'c:\\wamp\www\a.html'</span>;</span><br><span class="line">    var obj=path.parse(str);</span><br><span class="line"></span><br><span class="line">    base :æ–‡ä»¶å<span class="string">"a.html"</span></span><br><span class="line">    ext:æ‰©å±•å<span class="string">"html"</span></span><br><span class="line">    dir:è·¯å¾„<span class="string">'c:\\wamp\www'</span></span><br><span class="line">    name:æ–‡ä»¶å<span class="string">"a"</span></span><br><span class="line"></span><br><span class="line">//2.fsçš„renameé‡å‘½å</span><br><span class="line">    fs.rename(<span class="string">'a.txt'</span>,<span class="string">'b.txt'</span>,<span class="keyword">function</span>(err)&#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">    fs.rename(è€åï¼Œæ–°åï¼Œ<span class="keyword">function</span>(err)&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var obj=multer(&#123;dest:<span class="string">'./www/upload/'</span>&#125;)  //æ–‡ä»¶ä¿å­˜çš„ä½ç½®</span><br><span class="line"></span><br><span class="line">server.use(obj.any())       //æ¥å—ä»»æ„ç±»å‹æ–‡ä»¶</span><br><span class="line">//åªæ¥æ”¶name=f1çš„æ–‡ä»¶ : server.use(obj.single(<span class="string">'f1'</span>))  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//req.files:æŒ‡ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾ï¼š</span><br><span class="line">server.use(<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    var newName = req.file[0].path+pathLib.parse(req.file[0].originalname).ext</span><br><span class="line">    fs.rename(req.file[0].path,newName,<span class="keyword">function</span>()(err)&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)</span><br><span class="line">            res.send(<span class="string">'ä¸Šä¼ å¤±è´¥'</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            res.send(<span class="string">'ä¸Šä¼ æˆåŠŸ'</span>)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/2019/08/13/node5/05.png" alt="05.png"><br><img src="/2019/08/13/node5/06.png" alt="06.png"></p>
<ul>
<li>htmlæ–‡ä»¶ï¼š</li>
</ul>
<p><img src="/2019/08/13/node5/04.png" alt="04.png"><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">'http://localhost:8080/'</span> method=<span class="string">'post'</span> enctype=<span class="string">'multipart/form-data'</span>&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">'file'</span>/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">'submit'</span> value=<span class="string">'ä¸Šä¼ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="consolidate-æ¨¡æ¿å¼•æ“æ•´åˆåº“"><a href="#consolidate-æ¨¡æ¿å¼•æ“æ•´åˆåº“" class="headerlink" title="consolidate æ¨¡æ¿å¼•æ“æ•´åˆåº“"></a>consolidate æ¨¡æ¿å¼•æ“æ•´åˆåº“</h3><p>å®‰è£…ï¼šnpm install consolidate<br>å¼•ç”¨ï¼šconst consolidate = require(â€˜consolidateâ€™);<br>é…ç½®æ¨¡æ¿å¼•æ“ï¼š</p>
<ul>
<li>æˆ‘è¦è¾“å‡ºä»€ä¹ˆä¸œè¥¿<br>server.set(â€˜view engineâ€™,â€™htmlâ€™)</li>
<li>æ¨¡æ¿æ–‡ä»¶æ”¾åœ¨å“ªé‡Œ<br>server.set(â€˜viewâ€™,â€™./viewsâ€™)</li>
<li>å“ªç§æ¨¡æ¿å¼•æ“<br>server.engine(â€˜htmlâ€™,consolidate.ejs)</li>
</ul>
<p>server.get(â€˜/â€˜,function(req,res){<br>    res.render(â€˜æ¨¡æ¿æ–‡ä»¶â€™ï¼Œæ•°æ®);<br>})</p>
<h3 id="routeè·¯ç”±"><a href="#routeè·¯ç”±" class="headerlink" title="routeè·¯ç”±"></a>routeè·¯ç”±</h3><p>æ ¹æ®ç›®å½•çš„ä¸åŒï¼Œè°ƒç”¨ä¸åŒçš„æ¨¡å—</p>
<p>const express = require(â€˜expressâ€™);</p>
<p>var server=express();</p>
<p>var routeUser =express.Route();<br>routeUser.get(â€˜1.htmlâ€™,function(req,res){<br>    res.send(â€˜user1â€™)<br>})<br>routeUser.get(â€˜2.htmlâ€™,function(req,res){<br>    res.send(â€˜user2â€™)<br>})</p>
<p>server.use(â€˜/userâ€™,routeUser);<br>server.listen(8080);</p>

                
                <div class="readmore">
                    <a href="/2019/08/13/node5/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/11/node4/">
                        nodeç¬”è®°(ä¸€)
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-11T11:48:05.000Z">
                            2019-08-11
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Node/">Node</a></li></ul>
                </div>
                
                    <h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><p>ä¼˜åŠ¿ï¼š<br>1ã€æ€§èƒ½å¥½<br>2ã€è·Ÿå‰å°JSé…åˆæ–¹ä¾¿<br>3ã€NodeJSä¾¿äºå‰ç«¯å­¦ä¹ </p>
<h3 id="httpç³»ç»Ÿæ¨¡å—ä½¿ç”¨"><a href="#httpç³»ç»Ÿæ¨¡å—ä½¿ç”¨" class="headerlink" title="httpç³»ç»Ÿæ¨¡å—ä½¿ç”¨"></a>httpç³»ç»Ÿæ¨¡å—ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const http=require(<span class="string">'http'</span>);</span><br><span class="line">var server = http.creatServer(<span class="keyword">function</span>(req,res)&#123;  //åˆ›å»ºæœåŠ¡å™¨</span><br><span class="line">    switch(res.url)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"/1.html"</span>:</span><br><span class="line">            res.write(<span class="string">"å‘å‰å°å†™ä¸œè¥¿111"</span>)ï¼›</span><br><span class="line">            <span class="built_in">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="string">"/2.html"</span>:</span><br><span class="line">            res.write(<span class="string">"å‘å‰å°å†™ä¸œè¥¿222"</span>)ï¼›</span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">        default</span><br><span class="line">            res.write(<span class="string">"404"</span>)ï¼›</span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    // res.write(<span class="string">"å‘å‰å°å†™ä¸œè¥¿"</span>)ï¼›</span><br><span class="line">    res.end();//ç»“æŸè¯·æ±‚</span><br><span class="line">&#125;)</span><br><span class="line">//ç›‘å¬ â€”â€” ç­‰ç€</span><br><span class="line">//ç«¯å£ â€”â€” æ•°å­—</span><br><span class="line">server.listen(8888);</span><br></pre></td></tr></table></figure>
<h3 id="fsæ–‡ä»¶æ¨¡å—"><a href="#fsæ–‡ä»¶æ¨¡å—" class="headerlink" title="fsæ–‡ä»¶æ¨¡å—"></a>fsæ–‡ä»¶æ¨¡å—</h3><p>fs (file system)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//å¯¼å…¥å¼•ç”¨:</span><br><span class="line">    const fs = require(<span class="string">'fs'</span>);</span><br><span class="line">//1.readFile(æ–‡ä»¶åï¼Œå›è°ƒå‡½æ•°)</span><br><span class="line">    fs.readFile(<span class="string">'aaa.txt'</span>,<span class="keyword">function</span>(err,data)&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            console.log(<span class="string">'è¯»å–å¤±è´¥'</span>)ï¼›</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            console.log(data.toString());//äºŒè¿›åˆ¶æ ¼å¼ç”¨toStringè½¬æ¢</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line">//2.writeFile(æ–‡ä»¶åï¼Œå†…å®¹ï¼Œå›è°ƒå‡½æ•°)</span><br><span class="line">fs.write(<span class="string">"bbb.txt"</span>,<span class="string">"asdfghjkl"</span>,<span class="keyword">function</span>(err)&#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>ä¸æœåŠ¡å™¨ç»“åˆ<br>å»ºç«‹wwwï¼ˆå¯ä»¥æ˜¯å…¶ä»–åå­—ï¼‰æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾è¯·æ±‚çš„æ–‡ä»¶ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const http=require(<span class="string">'http'</span>);</span><br><span class="line">var server = http.creatServer(<span class="keyword">function</span>(req,res)&#123;  //åˆ›å»ºæœåŠ¡å™¨</span><br><span class="line">    //req.url = <span class="string">'index.html'</span></span><br><span class="line">    //è¯»å–:<span class="string">'./www/index.html'</span></span><br><span class="line">    var file_name = <span class="string">'./www'</span>+req.url</span><br><span class="line">    </span><br><span class="line">    fs.readFile(file_name,<span class="keyword">function</span>(err,data)&#123; //å¼‚æ­¥</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.write(<span class="string">'è¯»å–å¤±è´¥'</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.write(data)</span><br><span class="line">        &#125;</span><br><span class="line">        res.end();//ç»“æŸè¯·æ±‚ï¼Œå› ä¸ºå¼‚æ­¥ï¼Œres.end()åº”æ”¾åœ¨æ­¤å¤„</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line">server.listen(8888);</span><br></pre></td></tr></table></figure></p>
<h3 id="httpæ•°æ®è§£æï¼ˆgetï¼‰"><a href="#httpæ•°æ®è§£æï¼ˆgetï¼‰" class="headerlink" title="httpæ•°æ®è§£æï¼ˆgetï¼‰"></a>httpæ•°æ®è§£æï¼ˆgetï¼‰</h3><p>å‰å°å‘é€è¯·æ±‚çš„æ–¹å¼ï¼šform/ajax/jsonp<br>åå°éƒ½æ˜¯ä¸€æ ·ã€‚å”¯æœ‰ä¸€ç‚¹ä¸åŒï¼Œè¯·æ±‚æ–¹å¼ä¸åŒï¼Œæ¥å—æ–¹å¼ä¸ä¸€æ ·ï¼ˆget/postï¼‰.ä¸‹é¢ä¸€ä¸ªå®ä¾‹ï¼š<br>GETæ•°æ®è§£æï¼š</p>
<ul>
<li>è‡ªå·±åˆ‡</li>
<li>querystring:</li>
<li>url:urlLib.parse(â€¦,true)</li>
</ul>
<p>server.js æ™®é€šå†™æ³•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const http = require(<span class="string">'http'</span>);</span><br><span class="line">http.createServer(<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">    //reqè·å–å‰å°è¯·æ±‚çš„æ•°æ®</span><br><span class="line">    var get=&#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(req.url.indexOf(<span class="string">'?'</span>) != -1)&#123;</span><br><span class="line">        console.log(req.url); //  /aaa?user=Tom&amp;pass=123456</span><br><span class="line">        var arr = req.url.split(<span class="string">'ï¼Ÿ'</span>)ï¼›// arr[0]=<span class="string">'/aaa'</span>  arr[1]=<span class="string">'user=Tom&amp;pass=123456'</span></span><br><span class="line">        var url=arr[0];</span><br><span class="line">        var arr2 = arr[1].split(<span class="string">'&amp;'</span>); //arr2</span><br><span class="line">        <span class="keyword">for</span>(var i=0;i&lt;arr2.length;i++)&#123;</span><br><span class="line">            var arr3=arr2[i].split(<span class="string">'='</span>)</span><br><span class="line">            get[arr3[0]]=arr3[1];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        var url=req.url;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(url,get)</span><br><span class="line">    res.end();</span><br><span class="line">&#125;).listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>server.js querystringæ¨¡å—å†™æ³•ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  //å†™æ³•å¦‚ä¸‹ï¼š</span><br><span class="line">    //const querystring=require(<span class="string">'querystring'</span>);</span><br><span class="line">    //var json = querystring.parse(<span class="string">'user=Tom&amp;pass=123456'</span>)</span><br><span class="line">    //console.log(json)</span><br><span class="line">//server.jsæ”¹åŠ¨åï¼š</span><br><span class="line">    const http = require(<span class="string">'http'</span>);</span><br><span class="line">    const querystring=require(<span class="string">'querystring'</span>);</span><br><span class="line">    http.createServer(<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">        //reqè·å–å‰å°è¯·æ±‚çš„æ•°æ®</span><br><span class="line">        var get=&#123;&#125;;</span><br><span class="line">        <span class="keyword">if</span>(req.url.indexOf(<span class="string">'?'</span>) != -1)&#123;</span><br><span class="line">            console.log(req.url); //  /aaa?user=Tom&amp;pass=123456</span><br><span class="line">            var arr = req.url.split(<span class="string">'ï¼Ÿ'</span>)ï¼›// arr[0]=<span class="string">'/aaa'</span>  arr[1]=<span class="string">'user=Tom&amp;pass=123456'</span></span><br><span class="line">            var url=arr[0];</span><br><span class="line">            get=querystring.parse(arr[1]);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            var url=req.url;</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(url,get)</span><br><span class="line">        res.end();</span><br><span class="line">    &#125;).listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>server.js urlæ¨¡å—å†™æ³•ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//url.jså†™æ³•</span><br><span class="line">    const urlLib=require(<span class="string">'url'</span>);</span><br><span class="line">    var obj= urlLib.parse(<span class="string">"http://www.aaa.bbb/index.html?a=12&amp;b=55"</span>,<span class="literal">true</span>);  ç¬¬äºŒä¸ªå‚æ•°ä¸º<span class="literal">true</span>æ—¶ï¼Œä¼šæŠŠpathnameç­‰è§£æä¸ºjson.</span><br><span class="line">    console.log(obj.pathname,obj.query);</span><br><span class="line">//server.jsæ”¹åŠ¨åï¼š</span><br><span class="line">    const http = require(<span class="string">'http'</span>);</span><br><span class="line">    http.createServer(<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">        //reqè·å–å‰å°è¯·æ±‚çš„æ•°æ®</span><br><span class="line">        var obj = urlLib.parse(req.url,<span class="literal">true</span>);</span><br><span class="line">        var url=obj.pathname;</span><br><span class="line">        var get=obj.query;</span><br><span class="line"></span><br><span class="line">        console.log(url,get)</span><br><span class="line">        res.end();</span><br><span class="line">    &#125;).listen(8080);</span><br></pre></td></tr></table></figure></p>
<p>form.html<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"http://localhost:8080/aaa"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">        ç”¨æˆ·ï¼š</span><br><span class="line">        &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"user"</span> value=<span class="string">''</span>&gt; &lt;br&gt;</span><br><span class="line">        &lt;input <span class="built_in">type</span>=<span class="string">"password"</span> name=<span class="string">"pass"</span> value=<span class="string">''</span>&gt; &lt;br&gt;</span><br><span class="line">        &lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> value=<span class="string">'æäº¤'</span></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="httpæ•°æ®è§£æï¼ˆpostï¼‰"><a href="#httpæ•°æ®è§£æï¼ˆpostï¼‰" class="headerlink" title="httpæ•°æ®è§£æï¼ˆpostï¼‰"></a>httpæ•°æ®è§£æï¼ˆpostï¼‰</h3><p>POSTæ•°æ®æ¥æ”¶ï¼šPOSTæ•°æ®æ¯”GETæ•°æ®å¤§çš„å¤š,æ ¹æ®æ•°æ®é‡å¤§å°åˆ†æ®µå®Œæˆ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const http=require(<span class="string">'http'</span>);</span><br><span class="line">const querystring=require(<span class="string">'querystring'</span>);</span><br><span class="line">http.creatServer(<span class="keyword">function</span>(req,res)&#123;</span><br><span class="line">        //POST--req</span><br><span class="line">    var str=<span class="string">''</span>;  //æ¥å—æ•°æ®</span><br><span class="line"></span><br><span class="line">        //data--æœ‰ä¸€æ®µæ•°æ®åˆ°è¾¾ï¼ˆå¾ˆå¤šæ¬¡ï¼‰</span><br><span class="line">    req.on(<span class="string">'data'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        str+=data</span><br><span class="line">    &#125;);</span><br><span class="line">        //end--æ•°æ®å…¨éƒ¨åˆ°è¾¾ï¼ˆä¸€æ¬¡ï¼‰</span><br><span class="line">    req.on(<span class="string">'end'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        var post = querystring.parse(str);</span><br><span class="line">        console.log(post)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(8080);</span><br></pre></td></tr></table></figure></p>
<h3 id="åº”ç”¨1-ç®€æ˜“httpServeræ­å»º-ç”¨æˆ·æ³¨å†Œç™»å½•-ç•¥"><a href="#åº”ç”¨1-ç®€æ˜“httpServeræ­å»º-ç”¨æˆ·æ³¨å†Œç™»å½•-ç•¥" class="headerlink" title="åº”ç”¨1:ç®€æ˜“httpServeræ­å»º,ç”¨æˆ·æ³¨å†Œç™»å½•(ç•¥)"></a>åº”ç”¨1:ç®€æ˜“httpServeræ­å»º,ç”¨æˆ·æ³¨å†Œç™»å½•(ç•¥)</h3><h3 id="nodeJSæ¨¡å—åŒ–"><a href="#nodeJSæ¨¡å—åŒ–" class="headerlink" title="nodeJSæ¨¡å—åŒ–"></a>nodeJSæ¨¡å—åŒ–</h3><h4 id="ç³»ç»Ÿæ¨¡å—ä»‹ç»"><a href="#ç³»ç»Ÿæ¨¡å—ä»‹ç»" class="headerlink" title="ç³»ç»Ÿæ¨¡å—ä»‹ç»"></a>ç³»ç»Ÿæ¨¡å—ä»‹ç»</h4><p>é™¤äº†ä»¥ä¸Šç”¨åˆ°çš„ï¼šhttpã€querystringã€url,è¿˜æœ‰ï¼š</p>
<ul>
<li>Crypto åŠ å¯†</li>
<li>Event äº‹ä»¶</li>
<li>Net ç½‘ç»œæ“ä½œ</li>
<li>OS æ“ä½œç³»ç»Ÿä¿¡æ¯</li>
<li>Path å¤„ç†æ–‡ä»¶è·¯å¾„</li>
<li>Stream æµæ“ä½œ</li>
<li>Timer å®šæ—¶å™¨</li>
<li>ZLIB å‹ç¼©</li>
</ul>
<h4 id="è‡ªå®šä¹‰æ¨¡å—"><a href="#è‡ªå®šä¹‰æ¨¡å—" class="headerlink" title="è‡ªå®šä¹‰æ¨¡å—"></a>è‡ªå®šä¹‰æ¨¡å—</h4><p>å…³äºå¼•å…¥æ¨¡å—å†™æ³•ï¼šè‹¥ä¸ºå½“å‰ç›®å½•è‡ªå·±çš„æ¨¡å—ï¼ŒåŠ ä¸Šâ€œ./â€,ç³»ç»Ÿæ¨¡å—è¦åŠ ã€‚<br>è‹¥æƒ³è¦è¾“å‡ºä¸œè¥¿ï¼Œå¿…é¡»exportsã€‚<br>è‹¥éƒ½è¾“å‡ºå¤šä¸ªä¸œè¥¿ï¼Œmoduleå¯å®ç°æ‰¹é‡è¾“å‡ºã€‚</p>
<ul>
<li>require:è¯·æ±‚å¼•å…¥å…¶ä»–æ¨¡å—ã€‚</li>
<li>module:æ‰¹é‡è¾“å‡ºã€‚</li>
<li>exports:è¾“å‡ºã€‚</li>
<li>module.exports == exportsã€‚</li>
<li>const aaa = require(â€˜./bbb.jsâ€™); å…¶ä¸­â€œ.jsâ€å¯çœç•¥ã€‚</li>
</ul>
<p>npm:nodejs package manager(nodejsåŒ…ç®¡ç†å™¨)<br>1ã€ç»Ÿè®¡ä¸‹è½½é€”å¾„<br>2ã€è‡ªåŠ¨ä¸‹è½½ä¾èµ–</p>
<p>npm init<br>npm publish<br>npm update<br>npm unpublish<br>npm â€“force unpublish</p>
<p><img src="/2019/08/11/node4/01.png" alt="01.png"></p>
<p>node_modules:æ”¾æ¨¡å—ï¼Œå¯ä»¥æ”¾è‡ªå·±å®šä¹‰çš„æ¨¡å—ï¼Œæ­¤æ—¶è‹¥å¼•ç”¨ï¼Œä¸åŠ â€œ./â€</p>
<blockquote>
<p>æ€»ç»“ï¼šrequireå¼•å…¥æ¨¡å—ï¼Œè‹¥æœ‰â€œ./â€,ä»å½“å‰ç›®å½•æ‰¾ï¼Œè‹¥æ²¡æœ‰â€œ./â€ï¼Œä»ç³»ç»Ÿæ¨¡å—æˆ–node_modulesæ‰¾ã€‚<br>æ¨¡å—ä¼˜å…ˆçº§ï¼šç³»ç»Ÿ&gt;node_modules,ä¸€èˆ¬å°†è‡ªå®šä¹‰æ¨¡å—æ”¾åœ¨node_modulesä¸­ã€‚</p>
</blockquote>

                
                <div class="readmore">
                    <a href="/2019/08/11/node4/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/11/apply-and-bind/">
                        apply and bind
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-11T02:36:27.000Z">
                            2019-08-11
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/åŸºç¡€å‰ç«¯æŠ€æœ¯/">åŸºç¡€å‰ç«¯æŠ€æœ¯</a></li></ul>
                </div>
                
                    <p>æœ¬ç¯‡ä¸»è¦è§£å†³ä¸€ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>1.applyå’Œcallçš„åŒºåˆ«åœ¨å“ªé‡Œ</li>
<li>2.ä»€ä¹ˆæƒ…å†µä¸‹ç”¨apply,ä»€ä¹ˆæƒ…å†µä¸‹ç”¨call</li>
<li>3.applyçš„å…¶ä»–å·§å¦™ç”¨æ³•ï¼ˆä¸€èˆ¬åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨applyï¼‰*</li>
</ul>
<p><font color="red"> apply:æ–¹æ³•èƒ½åŠ«æŒå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œç»§æ‰¿å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„å±æ€§.</font></p>
<blockquote>
<p>Function.apply(obj,args)æ–¹æ³•èƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°<br>objï¼šè¿™ä¸ªå¯¹è±¡å°†ä»£æ›¿Functionç±»é‡Œthiså¯¹è±¡<br>argsï¼šè¿™ä¸ªæ˜¯æ•°ç»„ï¼Œå®ƒå°†ä½œä¸ºå‚æ•°ä¼ ç»™Functionï¼ˆargsâ€“&gt;argumentsï¼‰</p>
</blockquote>
<p>call:å’Œapplyçš„æ„æ€ä¸€æ ·,åªä¸è¿‡æ˜¯å‚æ•°åˆ—è¡¨ä¸ä¸€æ ·.</p>
<blockquote>
<p>Function.call(obj,[param1[,param2[,â€¦[,paramN]]]])<br>objï¼šè¿™ä¸ªå¯¹è±¡å°†ä»£æ›¿Functionç±»é‡Œthiså¯¹è±¡<br>paramsï¼šè¿™ä¸ªæ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨</p>
</blockquote>
<h4 id="applyç¤ºä¾‹"><a href="#applyç¤ºä¾‹" class="headerlink" title="applyç¤ºä¾‹:"></a>applyç¤ºä¾‹:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    /*å®šä¹‰ä¸€ä¸ªäººç±»*/</span><br><span class="line">    <span class="keyword">function</span> Person(name,age)</span><br><span class="line">    &#123;</span><br><span class="line">        this.name=name;</span><br><span class="line">        this.age=age;</span><br><span class="line">    &#125;</span><br><span class="line">    /*å®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»*/</span><br><span class="line">    functionStudent(name,age,grade)</span><br><span class="line">    &#123;</span><br><span class="line">        Person.apply(this,arguments);</span><br><span class="line">        this.grade=grade;</span><br><span class="line">    &#125;</span><br><span class="line">    //åˆ›å»ºä¸€ä¸ªå­¦ç”Ÿç±»</span><br><span class="line">    var student=new Student(<span class="string">"qian"</span>,21,<span class="string">"ä¸€å¹´çº§"</span>);</span><br><span class="line">    //æµ‹è¯•</span><br><span class="line">    alert(<span class="string">"name:"</span>+student.name+<span class="string">"\n"</span>+<span class="string">"age:"</span>+student.age+<span class="string">"\n"</span>+<span class="string">"grade:"</span>+student.grade);</span><br><span class="line">    //å¤§å®¶å¯ä»¥çœ‹åˆ°æµ‹è¯•ç»“æœname:qian  age:21  grade:ä¸€å¹´çº§</span><br><span class="line">    //å­¦ç”Ÿç±»é‡Œé¢æˆ‘æ²¡æœ‰ç»™nameå’Œageå±æ€§èµ‹å€¼å•Š,ä¸ºä»€ä¹ˆåˆå­˜åœ¨è¿™ä¸¤ä¸ªå±æ€§çš„å€¼å‘¢,è¿™ä¸ªå°±æ˜¯applyçš„ç¥å¥‡ä¹‹å¤„.</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>åˆ†æ: Person.apply(this,arguments);</p>
<ul>
<li>this:åœ¨åˆ›å»ºå¯¹è±¡åœ¨è¿™ä¸ªæ—¶å€™ä»£è¡¨çš„æ˜¯student</li>
<li>arguments:æ˜¯ä¸€ä¸ªæ•°ç»„,ä¹Ÿå°±æ˜¯[â€œqianâ€,â€21â€,â€ä¸€å¹´çº§â€];<br>ä¹Ÿå°±æ˜¯é€šä¿—ä¸€ç‚¹è®²å°±æ˜¯:ç”¨studentå»æ‰§è¡ŒPersonè¿™ä¸ªç±»é‡Œé¢çš„å†…å®¹,åœ¨Personè¿™ä¸ªç±»é‡Œé¢å­˜åœ¨this.nameç­‰ä¹‹ç±»çš„è¯­å¥,è¿™æ ·å°±å°†å±æ€§åˆ›å»ºåˆ°äº†studentå¯¹è±¡é‡Œé¢</li>
</ul>
<h4 id="callç¤ºä¾‹"><a href="#callç¤ºä¾‹" class="headerlink" title="callç¤ºä¾‹"></a>callç¤ºä¾‹</h4><p>åœ¨Studenå‡½æ•°é‡Œé¢å¯ä»¥å°†applyä¸­ä¿®æ”¹æˆå¦‚ä¸‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.call(this,name,age);</span><br></pre></td></tr></table></figure></p>
<h4 id="ä»€ä¹ˆæƒ…å†µä¸‹ç”¨apply-ä»€ä¹ˆæƒ…å†µä¸‹ç”¨call"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ç”¨apply-ä»€ä¹ˆæƒ…å†µä¸‹ç”¨call" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ç”¨apply,ä»€ä¹ˆæƒ…å†µä¸‹ç”¨call"></a>ä»€ä¹ˆæƒ…å†µä¸‹ç”¨apply,ä»€ä¹ˆæƒ…å†µä¸‹ç”¨call</h4><p>åœ¨ç»™å¯¹è±¡å‚æ•°çš„æƒ…å†µä¸‹,å¦‚æœå‚æ•°çš„å½¢å¼æ˜¯æ•°ç»„çš„æ—¶å€™,æ¯”å¦‚applyç¤ºä¾‹é‡Œé¢ä¼ é€’äº†å‚æ•°arguments,è¿™ä¸ªå‚æ•°æ˜¯æ•°ç»„ç±»å‹,å¹¶ä¸”åœ¨è°ƒç”¨Personçš„æ—¶å€™å‚æ•°çš„åˆ—è¡¨æ˜¯å¯¹åº”ä¸€è‡´çš„(ä¹Ÿå°±æ˜¯Personå’ŒStudentçš„å‚æ•°åˆ—è¡¨å‰ä¸¤ä½æ˜¯ä¸€è‡´çš„) å°±å¯ä»¥é‡‡ç”¨ apply , å¦‚æœæˆ‘çš„Personçš„å‚æ•°åˆ—è¡¨æ˜¯è¿™æ ·çš„(age,name),è€ŒStudentçš„å‚æ•°åˆ—è¡¨æ˜¯(name,age,grade),è¿™æ ·å°±å¯ä»¥ç”¨callæ¥å®ç°äº†,ä¹Ÿå°±æ˜¯ç›´æ¥æŒ‡å®šå‚æ•°åˆ—è¡¨å¯¹åº”å€¼çš„ä½ç½®(Person.call(this,age,name,grade));</p>
<h4 id="applyçš„ä¸€äº›å…¶ä»–å·§å¦™ç”¨æ³•"><a href="#applyçš„ä¸€äº›å…¶ä»–å·§å¦™ç”¨æ³•" class="headerlink" title="applyçš„ä¸€äº›å…¶ä»–å·§å¦™ç”¨æ³•"></a>applyçš„ä¸€äº›å…¶ä»–å·§å¦™ç”¨æ³•</h4><p>ç»†å¿ƒçš„äººå¯èƒ½å·²ç»å¯Ÿè§‰åˆ°,åœ¨æˆ‘è°ƒç”¨applyæ–¹æ³•çš„æ—¶å€™,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡(this), ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„é›†åˆ, åœ¨è°ƒç”¨Personçš„æ—¶å€™,ä»–éœ€è¦çš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„,ä½†æ˜¯ä¸ºä»€ä¹ˆä»–ç»™æˆ‘ä¸€ä¸ªæ•°ç»„æˆ‘ä»ç„¶å¯ä»¥å°†æ•°ç»„è§£æä¸ºä¸€ä¸ªä¸€ä¸ªçš„å‚æ•°,è¿™ä¸ªå°±æ˜¯applyçš„ä¸€ä¸ªå·§å¦™çš„ç”¨å¤„,å¯ä»¥å°†ä¸€ä¸ªæ•°ç»„é»˜è®¤çš„è½¬æ¢ä¸ºä¸€ä¸ªå‚æ•°åˆ—è¡¨([param1,param2,param3] è½¬æ¢ä¸º param1,param2,param3) è¿™ä¸ªå¦‚æœè®©æˆ‘ä»¬ç”¨ç¨‹åºæ¥å®ç°å°†æ•°ç»„çš„æ¯ä¸€ä¸ªé¡¹,æ¥è£…æ¢ä¸ºå‚æ•°çš„åˆ—è¡¨,å¯èƒ½éƒ½å¾—è´¹ä¸€ä¼šåŠŸå¤«,å€ŸåŠ©applyçš„è¿™ç‚¹ç‰¹æ€§,æ‰€ä»¥å°±æœ‰äº†ä»¥ä¸‹é«˜æ•ˆç‡çš„æ–¹æ³•:</p>
<p>a) Math.max å¯ä»¥å®ç°å¾—åˆ°æ•°ç»„ä¸­æœ€å¤§çš„ä¸€é¡¹</p>
<p>å› ä¸ºMath.maxå‚æ•°é‡Œé¢ä¸æ”¯æŒMath.max([param1,param2])ä¹Ÿå°±æ˜¯æ•°ç»„ä½†æ˜¯å®ƒæ”¯æŒMath.max(param1,param2,param3â€¦),æ‰€ä»¥å¯ä»¥æ ¹æ®åˆšæ‰applyçš„é‚£ä¸ªç‰¹ç‚¹æ¥è§£å†³ var max=Math.max.apply(null,array),è¿™æ ·è½»æ˜“çš„å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ•°ç»„ä¸­æœ€å¤§çš„ä¸€é¡¹(applyä¼šå°†ä¸€ä¸ªæ•°ç»„è£…æ¢ä¸ºä¸€ä¸ªå‚æ•°æ¥ä¸€ä¸ªå‚æ•°çš„ä¼ é€’ç»™æ–¹æ³•)<br>è¿™å—åœ¨è°ƒç”¨çš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•°ç»™äº†ä¸€ä¸ªnull,è¿™ä¸ªæ˜¯å› ä¸ºæ²¡æœ‰å¯¹è±¡å»è°ƒç”¨è¿™ä¸ªæ–¹æ³•,æˆ‘åªéœ€è¦ç”¨è¿™ä¸ªæ–¹æ³•å¸®æˆ‘è¿ç®—,å¾—åˆ°è¿”å›çš„ç»“æœå°±è¡Œ,.æ‰€ä»¥ç›´æ¥ä¼ é€’äº†ä¸€ä¸ªnullè¿‡å»</p>
<p>b) Math.min  å¯ä»¥å®ç°å¾—åˆ°æ•°ç»„ä¸­æœ€å°çš„ä¸€é¡¹åŒæ ·å’Œ maxæ˜¯ä¸€ä¸ªæ€æƒ³ var min=Math.min.apply(null,array);</p>
<p>c) Array.prototype.push å¯ä»¥å®ç°ä¸¤ä¸ªæ•°ç»„åˆå¹¶</p>
<p>åŒæ ·pushæ–¹æ³•æ²¡æœ‰æä¾›pushä¸€ä¸ªæ•°ç»„,ä½†æ˜¯å®ƒæä¾›äº†push(param1,param,â€¦paramN) æ‰€ä»¥åŒæ ·ä¹Ÿå¯ä»¥é€šè¿‡applyæ¥è£…æ¢ä¸€ä¸‹è¿™ä¸ªæ•°ç»„,å³:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vararr1=new Array(<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>);</span><br><span class="line">vararr2=new Array(<span class="string">"4"</span>,<span class="string">"5"</span>,<span class="string">"6"</span>);</span><br><span class="line">Array.prototype.push.apply(arr1,arr2);</span><br></pre></td></tr></table></figure></p>

                
                <div class="readmore">
                    <a href="/2019/08/11/apply-and-bind/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/10/node3/">
                        nodeåŸºç¡€(ä¸‰)
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-10T09:41:11.000Z">
                            2019-08-10
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Node/">Node</a></li></ul>
                </div>
                
                    <h3 id="ä»€ä¹ˆæ˜¯node-js"><a href="#ä»€ä¹ˆæ˜¯node-js" class="headerlink" title="ä»€ä¹ˆæ˜¯node.js"></a>ä»€ä¹ˆæ˜¯node.js</h3><p>ç¼–å†™é«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨çš„JSå·¥å…·åŒ…ï¼ˆç”¨jså¼€å‘æœåŠ¡ç«¯ç¨‹åºï¼‰<br>å•çº¿ç¨‹ã€å¼‚æ­¥ã€äº‹ä»¶é©±åŠ¨<br>ç‰¹ç‚¹ï¼šå¿«ã€è€—å†…å­˜</p>
<h4 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h4><p>expressã€koaã€Hapiã€ä»¥åŠexpressåŸºç¡€ä¸Šçš„sails</p>
<h3 id="nodeçš„å®‰è£…"><a href="#nodeçš„å®‰è£…" class="headerlink" title="nodeçš„å®‰è£…"></a>nodeçš„å®‰è£…</h3><p><a href="http://nodejs.cn/" target="_blank" rel="noopener">http://nodejs.cn/</a><br>æ˜¯å¦æˆåŠŸï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v  </span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure></p>
<h4 id="ç¬¬ä¸€ä¸ªhelloç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªhelloç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªhelloç¨‹åº"></a>ç¬¬ä¸€ä¸ªhelloç¨‹åº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var http = require(<span class="string">'http'</span>);</span><br><span class="line">http.createServer(<span class="keyword">function</span>(request,response)&#123;</span><br><span class="line">    response.writeHead(200,&#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span> (request.url!==<span class="string">"/favicon.ico"</span>) &#123;   //æ¸…é™¤ç¬¬äºŒæ¬¡è®¿é—®</span><br><span class="line">        console.log(<span class="string">'è®¿é—®'</span>);</span><br><span class="line">        response.write(<span class="string">'hello,world'</span>);</span><br><span class="line">        response.end(<span class="string">'ä½ å¥½ï¼Œä¸–ç•Œ'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(8000);</span><br><span class="line">console.log(<span class="string">'Server running at http://localhost:8000/'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨å‡½æ•°"><a href="#è°ƒç”¨å‡½æ•°" class="headerlink" title="è°ƒç”¨å‡½æ•°"></a>è°ƒç”¨å‡½æ•°</h3><ul>
<li>è°ƒç”¨æœ¬åœ°å‡½æ•°</li>
<li>è°ƒç”¨å…¶ä»–jsæ–‡ä»¶ä¸­çš„å‡½æ•°</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var http = require(<span class="string">'http'</span>);</span><br><span class="line"> var otherfun = require(<span class="string">"./models/other_func.js"</span>);</span><br><span class="line"> http.createServer(<span class="keyword">function</span>(request,response)&#123;</span><br><span class="line">    response.writeHead(200,&#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span> (request.url!==<span class="string">"/favicon.ico"</span>) &#123;</span><br><span class="line">        //fun1(response);</span><br><span class="line">        otherfun.fun2(response);</span><br><span class="line">        otherfun.fun3(response);</span><br><span class="line"></span><br><span class="line">          //ç”¨å­—ç¬¦ä¸²è°ƒç”¨å¯¹åº”å‡½æ•°</span><br><span class="line">        // otherfun.fun2(response);</span><br><span class="line">        // otherfun.fun3(response);</span><br><span class="line"></span><br><span class="line">        funname = <span class="string">'fun3'</span>;</span><br><span class="line">        otherfun[funname](response);</span><br><span class="line"></span><br><span class="line">        response.end(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(8000);</span><br><span class="line">console.log(<span class="string">'Server running at http://10.75.68.123:8000/'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> fun1(res)&#123;       // æœ¬æ–‡ä»¶å‡½æ•°</span><br><span class="line">    console.log(<span class="string">"fun1"</span>);</span><br><span class="line">    res.write(<span class="string">"hello,æˆ‘æ˜¯fun1"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…³äºè¢«è°ƒç”¨çš„å‡½æ•°ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//åªæ”¯æŒä¸€ä¸ªå‡½æ•°</span><br><span class="line"><span class="keyword">function</span> fun2(res)&#123;</span><br><span class="line">    console.log(<span class="string">"fun2"</span>);</span><br><span class="line">    res.write(<span class="string">"hello,æˆ‘æ˜¯fun2"</span>);</span><br><span class="line">&#125;</span><br><span class="line">module.exports = fun2;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    //æ”¯æŒå¤šä¸ªå‡½æ•°</span><br><span class="line">module.exports=&#123;</span><br><span class="line">    fun2:<span class="keyword">function</span>(res)&#123;</span><br><span class="line">        console.log(<span class="string">"fun2"</span>);</span><br><span class="line">        res.write(<span class="string">"hello,æˆ‘æ˜¯fun2"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    fun3:<span class="keyword">function</span>(res)&#123;</span><br><span class="line">        console.log(<span class="string">"fun3"</span>);</span><br><span class="line">        res.write(<span class="string">"hello,æˆ‘æ˜¯fun3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨æ¨¡å—"><a href="#è°ƒç”¨æ¨¡å—" class="headerlink" title="è°ƒç”¨æ¨¡å—"></a>è°ƒç”¨æ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> var http = require(<span class="string">'http'</span>);</span><br><span class="line"> // var User = require(<span class="string">"./models/User"</span>);</span><br><span class="line"> var Teacher = require(<span class="string">"./models/Teacher"</span>);</span><br><span class="line"></span><br><span class="line"> http.createServer(<span class="keyword">function</span>(request,response)&#123;</span><br><span class="line">    response.writeHead(200,&#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span> (request.url!==<span class="string">"/favicon.ico"</span>) &#123;</span><br><span class="line">        teacher = new Teacher(1,<span class="string">"å¼ ä¸‰"</span>,20);</span><br><span class="line">        teacher.enter();</span><br><span class="line">        teacher.teach(response);</span><br><span class="line">        // user.id=1;</span><br><span class="line">        // user.name=<span class="string">"å¼ ä¸‰"</span>;</span><br><span class="line">        // user.age=20;</span><br><span class="line">        // user.enter();</span><br><span class="line">        response.end(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(8000);</span><br><span class="line">console.log(<span class="string">'Server running at http://localhost:8000/'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="è·¯ç”±åˆæ­¥"><a href="#è·¯ç”±åˆæ­¥" class="headerlink" title="è·¯ç”±åˆæ­¥"></a>è·¯ç”±åˆæ­¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> var http = require(<span class="string">'http'</span>);</span><br><span class="line"> var url = require(<span class="string">"url"</span>);</span><br><span class="line"> var router = require(<span class="string">"./router"</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="keyword">function</span>(request,response)&#123;</span><br><span class="line">    response.writeHead(200,&#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span> (request.url!==<span class="string">"/favicon.ico"</span>) &#123;</span><br><span class="line">        var pathname=url.parse(request.url).pathname;</span><br><span class="line">        pathname = pathname.replace(/\//,<span class="string">''</span>);   //æ›¿æ¢æ‰å‰é¢çš„<span class="string">"/"</span></span><br><span class="line">        router[pathname](request,response);</span><br><span class="line">        console.log(pathname);</span><br><span class="line">        response.end(<span class="string">''</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(8000);</span><br><span class="line">console.log(<span class="string">'Server running at http://10.75.68.123:8000/'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="è¯»æ–‡ä»¶"><a href="#è¯»æ–‡ä»¶" class="headerlink" title="è¯»æ–‡ä»¶"></a>è¯»æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var http = require(<span class="string">'http'</span>);</span><br><span class="line"> var url = require(<span class="string">'url'</span>);</span><br><span class="line"> var router = require(<span class="string">'./router'</span>);</span><br><span class="line"></span><br><span class="line"> // var optfile = require(<span class="string">"./models/optfile"</span>);</span><br><span class="line"></span><br><span class="line"> http.createServer(<span class="keyword">function</span>(request,response)&#123;</span><br><span class="line">    response.writeHead(200,&#123;<span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span>&#125;);</span><br><span class="line">    <span class="keyword">if</span> (request.url!==<span class="string">"/favicon.ico"</span>) &#123;</span><br><span class="line"></span><br><span class="line">        var pathname=url.parse(request.url).pathname;</span><br><span class="line">        pathname = pathname.replace(/\//,<span class="string">''</span>);   //æ›¿æ¢æ‰å‰é¢çš„<span class="string">"/"</span></span><br><span class="line">        router[pathname](request,response);</span><br><span class="line">        </span><br><span class="line">        /*</span><br><span class="line">        // optfile.readfileSync(<span class="string">'./views/login.html'</span>);</span><br><span class="line">        // optfile.readFile(<span class="string">'./views/login.html'</span>);</span><br><span class="line">        <span class="keyword">function</span> recall(data)&#123;</span><br><span class="line">            response.write(data);</span><br><span class="line">            response.end(<span class="string">'ok'</span>);   //ä¸å†™åˆ™æ²¡æœ‰httpåè®®å°¾</span><br><span class="line">        &#125;</span><br><span class="line">        optfile.readFile(<span class="string">'./views/login.html'</span>,recall);</span><br><span class="line">        // optfile.readFile(<span class="string">'C:\inetpub\wwwroot\HN_NTZJS01/index.html'</span>,recall);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">        console.log(<span class="string">"ä¸»ç¨‹åºæ‰§è¡Œå®Œæ¯•"</span>);</span><br><span class="line">        */</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(8000);</span><br><span class="line">console.log(<span class="string">'Server running at http://localhost:8000/'</span>)</span><br></pre></td></tr></table></figure>
<p>å¾…ç»­ã€‚ã€‚ã€‚</p>

                
                <div class="readmore">
                    <a href="/2019/08/10/node3/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/09/node2/">
                        nodeåŸºç¡€(äºŒ)
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-09T06:38:25.000Z">
                            2019-08-09
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Node/">Node</a></li></ul>
                </div>
                
                    <h3 id="Node-js-REPL-äº¤äº’å¼è§£é‡Šå™¨"><a href="#Node-js-REPL-äº¤äº’å¼è§£é‡Šå™¨" class="headerlink" title="Node.js REPL(äº¤äº’å¼è§£é‡Šå™¨)"></a>Node.js REPL(äº¤äº’å¼è§£é‡Šå™¨)</h3><p>Node.js REPL(Read Eval Print Loop:äº¤äº’å¼è§£é‡Šå™¨) è¡¨ç¤ºä¸€ä¸ªç”µè„‘çš„ç¯å¢ƒï¼Œç±»ä¼¼ Window ç³»ç»Ÿçš„ç»ˆç«¯æˆ– Unix/Linux shellï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼Œå¹¶æ¥æ”¶ç³»ç»Ÿçš„å“åº”ã€‚<br>æˆ‘ä»¬å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ Node çš„ç»ˆç«¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>åœæ­¢ REPL<br>å‰é¢æˆ‘ä»¬å·²ç»æåˆ°æŒ‰ä¸‹ä¸¤æ¬¡ ctrl + c é”®å°±èƒ½é€€å‡º REPL:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node</span><br><span class="line">&gt;</span><br><span class="line">(^C again to quit)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="Node-js-å›è°ƒå‡½æ•°"><a href="#Node-js-å›è°ƒå‡½æ•°" class="headerlink" title="Node.js å›è°ƒå‡½æ•°"></a>Node.js å›è°ƒå‡½æ•°</h3><p>Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚</p>
<p>å¼‚æ­¥ç¼–ç¨‹ä¾æ‰˜äºå›è°ƒæ¥å®ç°ï¼Œä½†ä¸èƒ½è¯´ä½¿ç”¨äº†å›è°ƒåç¨‹åºå°±å¼‚æ­¥åŒ–äº†ã€‚</p>
<p>å›è°ƒå‡½æ•°åœ¨å®Œæˆä»»åŠ¡åå°±ä¼šè¢«è°ƒç”¨ï¼ŒNode ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¾¹è¯»å–æ–‡ä»¶ï¼Œä¸€è¾¹æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œåœ¨æ–‡ä»¶è¯»å–å®Œæˆåï¼Œæˆ‘ä»¬å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å›ã€‚è¿™æ ·åœ¨æ‰§è¡Œä»£ç æ—¶å°±æ²¡æœ‰é˜»å¡æˆ–ç­‰å¾…æ–‡ä»¶ I/O æ“ä½œã€‚è¿™å°±å¤§å¤§æé«˜äº† Node.js çš„æ€§èƒ½ï¼Œå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¯·æ±‚ã€‚</p>
<p>å›è°ƒå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function foo1(name, age, callback) &#123; &#125;</span><br><span class="line">function foo2(value, callback1, callback2) &#123; &#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="é˜»å¡ä»£ç å®ä¾‹"><a href="#é˜»å¡ä»£ç å®ä¾‹" class="headerlink" title="é˜»å¡ä»£ç å®ä¾‹"></a>é˜»å¡ä»£ç å®ä¾‹</h4><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<p>èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼š<a href="http://www.runoob.com" target="_blank" rel="noopener">www.runoob.com</a><br>åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&quot;fs&quot;);</span><br><span class="line"></span><br><span class="line">var data = fs.readFileSync(&apos;input.txt&apos;);</span><br><span class="line"></span><br><span class="line">console.log(data.toString());</span><br><span class="line">console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;);</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com</span><br><span class="line"></span><br><span class="line">ç¨‹åºæ‰§è¡Œç»“æŸ!</span><br></pre></td></tr></table></figure></p>
<p>éé˜»å¡ä»£ç å®ä¾‹<br>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<p>èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼š<a href="http://www.runoob.com" target="_blank" rel="noopener">www.runoob.com</a><br>åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&quot;fs&quot;);</span><br><span class="line"></span><br><span class="line">fs.readFile(&apos;input.txt&apos;, function (err, data) &#123;</span><br><span class="line">    if (err) return console.error(err);</span><br><span class="line">    console.log(data.toString());</span><br><span class="line">&#125;);</span><br><span class="line">console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;);</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">ç¨‹åºæ‰§è¡Œç»“æŸ!</span><br><span class="line">èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä¸¤ä¸ªå®ä¾‹æˆ‘ä»¬äº†è§£äº†é˜»å¡ä¸éé˜»å¡è°ƒç”¨çš„ä¸åŒã€‚ç¬¬ä¸€ä¸ªå®ä¾‹åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œå®Œç¨‹åºã€‚ ç¬¬äºŒä¸ªå®ä¾‹æˆ‘ä»¬ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<p>å› æ­¤ï¼Œé˜»å¡æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œè€Œéé˜»å¡æ˜¯ä¸éœ€è¦æŒ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¤„ç†å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™åœ¨å›è°ƒå‡½æ•°å†…ã€‚</p>
<h3 id="Node-js-äº‹ä»¶å¾ªç¯"><a href="#Node-js-äº‹ä»¶å¾ªç¯" class="headerlink" title="Node.js äº‹ä»¶å¾ªç¯"></a>Node.js äº‹ä»¶å¾ªç¯</h3><p>Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚</p>
<p>Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚</p>
<p>Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚</p>
<p>Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°.</p>
<h4 id="äº‹ä»¶é©±åŠ¨ç¨‹åº"><a href="#äº‹ä»¶é©±åŠ¨ç¨‹åº" class="headerlink" title="äº‹ä»¶é©±åŠ¨ç¨‹åº"></a>äº‹ä»¶é©±åŠ¨ç¨‹åº</h4><p>Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚</p>
<p>å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>è¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸ºwebserverä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿè¢«ç§°ä¹‹ä¸ºéé˜»å¡å¼IOæˆ–è€…äº‹ä»¶é©±åŠ¨IOï¼‰</p>
<p>åœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¸»å¾ªç¯æ¥ç›‘å¬äº‹ä»¶ï¼Œå½“æ£€æµ‹åˆ°äº‹ä»¶æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚<br><img src="/2019/08/09/node2/event_loop.jpg" alt="event_loop.jpg"><br>æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚</p>
<p>Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¼•å…¥ events æ¨¡å—</span><br><span class="line">var events = require(&apos;events&apos;);</span><br><span class="line">// åˆ›å»º eventEmitter å¯¹è±¡</span><br><span class="line">var eventEmitter = new events.EventEmitter();</span><br></pre></td></tr></table></figure></p>
<p>ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº</span><br><span class="line">eventEmitter.on(&apos;eventName&apos;, eventHandler);</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è§¦å‘äº‹ä»¶</span><br><span class="line">eventEmitter.emit(&apos;eventName&apos;);</span><br></pre></td></tr></table></figure></p>
<p>å®ä¾‹<br>åˆ›å»º main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>å®ä¾‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// å¼•å…¥ events æ¨¡å—</span><br><span class="line">var events = require(&apos;events&apos;);</span><br><span class="line">// åˆ›å»º eventEmitter å¯¹è±¡</span><br><span class="line">var eventEmitter = new events.EventEmitter();</span><br><span class="line"> </span><br><span class="line">// åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åº</span><br><span class="line">var connectHandler = function connected() &#123;</span><br><span class="line">   console.log(&apos;è¿æ¥æˆåŠŸã€‚&apos;);</span><br><span class="line">  </span><br><span class="line">   // è§¦å‘ data_received äº‹ä»¶ </span><br><span class="line">   eventEmitter.emit(&apos;data_received&apos;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åº</span><br><span class="line">eventEmitter.on(&apos;connection&apos;, connectHandler);</span><br><span class="line"> </span><br><span class="line">// ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶</span><br><span class="line">eventEmitter.on(&apos;data_received&apos;, function()&#123;</span><br><span class="line">   console.log(&apos;æ•°æ®æ¥æ”¶æˆåŠŸã€‚&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">// è§¦å‘ connection äº‹ä»¶ </span><br><span class="line">eventEmitter.emit(&apos;connection&apos;);</span><br><span class="line"> </span><br><span class="line">console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;);</span><br></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ‰§è¡Œä»¥ä¸Šä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">è¿æ¥æˆåŠŸã€‚</span><br><span class="line">æ•°æ®æ¥æ”¶æˆåŠŸã€‚</span><br><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br></pre></td></tr></table></figure></p>
<h3 id="Node-js-EventEmitter"><a href="#Node-js-EventEmitter" class="headerlink" title="Node.js EventEmitter"></a>Node.js EventEmitter</h3><p>Node.js æ‰€æœ‰çš„å¼‚æ­¥ I/O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚</p>
<p>Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚</p>
<h4 id="EventEmitter-ç±»"><a href="#EventEmitter-ç±»" class="headerlink" title="EventEmitter ç±»"></a>EventEmitter ç±»</h4><p>events æ¨¡å—åªæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼š events.EventEmitterã€‚EventEmitter çš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡require(â€œeventsâ€);æ¥è®¿é—®è¯¥æ¨¡å—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¼•å…¥ events æ¨¡å—</span><br><span class="line">var events = require(&apos;events&apos;);</span><br><span class="line">// åˆ›å»º eventEmitter å¯¹è±¡</span><br><span class="line">var eventEmitter = new events.EventEmitter();</span><br></pre></td></tr></table></figure></p>
<p>EventEmitter å¯¹è±¡å¦‚æœåœ¨å®ä¾‹åŒ–æ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¼šè§¦å‘ error äº‹ä»¶ã€‚å½“æ·»åŠ æ–°çš„ç›‘å¬å™¨æ—¶ï¼ŒnewListener äº‹ä»¶ä¼šè§¦å‘ï¼Œå½“ç›‘å¬å™¨è¢«ç§»é™¤æ—¶ï¼ŒremoveListener äº‹ä»¶è¢«è§¦å‘ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ EventEmitter çš„ç”¨æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//event.js æ–‡ä»¶</span><br><span class="line">var EventEmitter = require(&apos;events&apos;).EventEmitter; </span><br><span class="line">var event = new EventEmitter(); </span><br><span class="line">event.on(&apos;some_event&apos;, function() &#123; </span><br><span class="line">    console.log(&apos;some_event äº‹ä»¶è§¦å‘&apos;); </span><br><span class="line">&#125;); </span><br><span class="line">setTimeout(function() &#123; </span><br><span class="line">    event.emit(&apos;some_event&apos;); </span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>è¿è¡Œè¿™æ®µä»£ç ï¼Œ1 ç§’åæ§åˆ¶å°è¾“å‡ºäº† â€˜some_event äº‹ä»¶è§¦å‘â€™ã€‚å…¶åŸç†æ˜¯ event å¯¹è±¡æ³¨å†Œäº†äº‹ä»¶ some_event çš„ä¸€ä¸ªç›‘å¬å™¨ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡ setTimeout åœ¨ 1000 æ¯«ç§’ä»¥åå‘ event å¯¹è±¡å‘é€äº‹ä»¶ some_eventï¼Œæ­¤æ—¶ä¼šè°ƒç”¨some_event çš„ç›‘å¬å™¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node event.js </span><br><span class="line">some_event äº‹ä»¶è§¦å‘</span><br></pre></td></tr></table></figure></p>
<p>EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<p>å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//event.js æ–‡ä»¶</span><br><span class="line">var events = require(&apos;events&apos;); </span><br><span class="line">var emitter = new events.EventEmitter(); </span><br><span class="line">emitter.on(&apos;someEvent&apos;, function(arg1, arg2) &#123; </span><br><span class="line">    console.log(&apos;listener1&apos;, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.on(&apos;someEvent&apos;, function(arg1, arg2) &#123; </span><br><span class="line">    console.log(&apos;listener2&apos;, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.emit(&apos;someEvent&apos;, &apos;arg1 å‚æ•°&apos;, &apos;arg2 å‚æ•°&apos;);</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node event.js </span><br><span class="line">listener1 arg1 å‚æ•° arg2 å‚æ•°</span><br><span class="line">listener2 arg1 å‚æ•° arg2 å‚æ•°</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä¾‹å­ä¸­ï¼Œemitter ä¸ºäº‹ä»¶ someEvent æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘äº† someEvent äº‹ä»¶ã€‚</p>
<p>è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨å›è°ƒå‡½æ•°è¢«å…ˆåè°ƒç”¨ã€‚ è¿™å°±æ˜¯EventEmitteræœ€ç®€å•çš„ç”¨æ³•ã€‚</p>
<p>EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ on å’Œ emitã€‚on å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œemit å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸‹ EventEmitter çš„å±æ€§ä»‹ç»ã€‚</p>
<h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4>
                
                <div class="readmore">
                    <a href="/2019/08/09/node2/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/08/node1/">
                        nodeåŸºç¡€(ä¸€)
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-08T03:09:06.000Z">
                            2019-08-08
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Node/">Node</a></li></ul>
                </div>
                
                    <p><font color="red">JavaScriptçš„åç«¯å¼€å‘</font><br>åœ¨Nodeä¸Šè¿è¡Œçš„JavaScriptç›¸æ¯”å…¶ä»–åç«¯å¼€å‘è¯­è¨€æœ‰ä½•ä¼˜åŠ¿ï¼Ÿ<br>æœ€å¤§çš„ä¼˜åŠ¿æ˜¯å€ŸåŠ©JavaScriptå¤©ç”Ÿçš„äº‹ä»¶é©±åŠ¨æœºåˆ¶åŠ V8é«˜æ€§èƒ½å¼•æ“ï¼Œä½¿ç¼–å†™é«˜æ€§èƒ½WebæœåŠ¡è½»è€Œæ˜“ä¸¾</p>
<h3 id="å®‰è£…Node-jså’Œnpm"><a href="#å®‰è£…Node-jså’Œnpm" class="headerlink" title="å®‰è£…Node.jså’Œnpm"></a>å®‰è£…Node.jså’Œnpm</h3><p>ç”±äºNode.jså¹³å°æ˜¯åœ¨åç«¯è¿è¡ŒJavaScriptä»£ç ï¼Œæ‰€ä»¥ï¼Œå¿…é¡»é¦–å…ˆåœ¨æœ¬æœºå®‰è£…Nodeç¯å¢ƒã€‚</p>
<h4 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h4><p>ä»Node.jså®˜ç½‘ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…ç¨‹åº<br>å®‰è£…å®Œæˆåï¼Œåœ¨Windowsç¯å¢ƒä¸‹ï¼Œè¯·æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œç„¶åè¾“å…¥node -vï¼Œå¦‚æœå®‰è£…æ­£å¸¸ï¼Œä½ åº”è¯¥çœ‹åˆ°v7.6.0è¿™æ ·çš„è¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\IEUser&gt;node -v</span><br><span class="line">v7.6.0</span><br></pre></td></tr></table></figure></p>
<h4 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h4><p>åœ¨æ­£å¼å¼€å§‹Node.jså­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¤è¯†ä¸€ä¸‹npmã€‚</p>
<p>npmæ˜¯ä»€ä¹ˆä¸œä¸œï¼Ÿnpmå…¶å®æ˜¯Node.jsçš„åŒ…ç®¡ç†å·¥å…·ï¼ˆpackage managerï¼‰ã€‚</p>
<p>ä¸ºå•¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨Node.jsä¸Šå¼€å‘æ—¶ï¼Œä¼šç”¨åˆ°å¾ˆå¤šåˆ«äººå†™çš„JavaScriptä»£ç ã€‚å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨åˆ«äººå†™çš„æŸä¸ªåŒ…ï¼Œæ¯æ¬¡éƒ½æ ¹æ®åç§°æœç´¢ä¸€ä¸‹å®˜æ–¹ç½‘ç«™ï¼Œä¸‹è½½ä»£ç ï¼Œè§£å‹ï¼Œå†ä½¿ç”¨ï¼Œéå¸¸ç¹çã€‚äºæ˜¯ä¸€ä¸ªé›†ä¸­ç®¡ç†çš„å·¥å…·åº”è¿è€Œç”Ÿï¼šå¤§å®¶éƒ½æŠŠè‡ªå·±å¼€å‘çš„æ¨¡å—æ‰“åŒ…åæ”¾åˆ°npmå®˜ç½‘ä¸Šï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œç›´æ¥é€šè¿‡npmå®‰è£…å°±å¯ä»¥ç›´æ¥ç”¨ï¼Œä¸ç”¨ç®¡ä»£ç å­˜åœ¨å“ªï¼Œåº”è¯¥ä»å“ªä¸‹è½½ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨æ¨¡å—Aï¼Œè€Œæ¨¡å—Aåˆä¾èµ–äºæ¨¡å—Bï¼Œæ¨¡å—Båˆä¾èµ–äºæ¨¡å—Xå’Œæ¨¡å—Yï¼Œnpmå¯ä»¥æ ¹æ®ä¾èµ–å…³ç³»ï¼ŒæŠŠæ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½ä¸‹è½½ä¸‹æ¥å¹¶ç®¡ç†èµ·æ¥ã€‚å¦åˆ™ï¼Œé æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨ç®¡ç†ï¼Œè‚¯å®šæ—¢éº»çƒ¦åˆå®¹æ˜“å‡ºé”™ã€‚</p>
<p>è®²äº†è¿™ä¹ˆå¤šï¼Œnpmç©¶ç«Ÿåœ¨å“ªï¼Ÿ</p>
<p>å…¶å®npmå·²ç»åœ¨Node.jså®‰è£…çš„æ—¶å€™é¡ºå¸¦è£…å¥½äº†ã€‚æˆ‘ä»¬åœ¨å‘½ä»¤æç¤ºç¬¦æˆ–è€…ç»ˆç«¯è¾“å…¥npm -vï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;npm -v</span><br><span class="line">4.1.2</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœç›´æ¥è¾“å…¥npmï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt; npm</span><br><span class="line"></span><br><span class="line">Usage: npm &lt;command&gt;</span><br><span class="line"></span><br><span class="line">where &lt;command&gt; is one of:</span><br></pre></td></tr></table></figure></p>
<h5 id="å¸è½½æ¨¡å—"><a href="#å¸è½½æ¨¡å—" class="headerlink" title="å¸è½½æ¨¡å—"></a>å¸è½½æ¨¡å—</h5><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¸è½½ Node.js æ¨¡å—ã€‚</p>
<p>$ npm uninstall express<br>å¸è½½åï¼Œä½ å¯ä»¥åˆ° /node_modules/ ç›®å½•ä¸‹æŸ¥çœ‹åŒ…æ˜¯å¦è¿˜å­˜åœ¨ï¼Œæˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<p>$ npm ls</p>
<h5 id="æ›´æ–°æ¨¡å—"><a href="#æ›´æ–°æ¨¡å—" class="headerlink" title="æ›´æ–°æ¨¡å—"></a>æ›´æ–°æ¨¡å—</h5><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°æ¨¡å—ï¼š</p>
<p>$ npm update express</p>
<h5 id="æœç´¢æ¨¡å—"><a href="#æœç´¢æ¨¡å—" class="headerlink" title="æœç´¢æ¨¡å—"></a>æœç´¢æ¨¡å—</h5><p>ä½¿ç”¨ä»¥ä¸‹æ¥æœç´¢æ¨¡å—ï¼š<br>$ npm search express</p>
<h5 id="NPM-å¸¸ç”¨å‘½ä»¤"><a href="#NPM-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="NPM å¸¸ç”¨å‘½ä»¤"></a>NPM å¸¸ç”¨å‘½ä»¤</h5><ul>
<li>NPMæä¾›äº†å¾ˆå¤šå‘½ä»¤ï¼Œä¾‹å¦‚installå’Œpublishï¼Œä½¿ç”¨npm helpå¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ã€‚</li>
<li>ä½¿ç”¨npm help <command>å¯æŸ¥çœ‹æŸæ¡å‘½ä»¤çš„è¯¦ç»†å¸®åŠ©ï¼Œä¾‹å¦‚npm help installã€‚</li>
<li>åœ¨package.jsonæ‰€åœ¨ç›®å½•ä¸‹ä½¿ç”¨npm install . -gå¯å…ˆåœ¨æœ¬åœ°å®‰è£…å½“å‰å‘½ä»¤è¡Œç¨‹åºï¼Œå¯ç”¨äºå‘å¸ƒå‰çš„æœ¬åœ°æµ‹è¯•ã€‚</li>
<li>ä½¿ç”¨npm update <package>å¯ä»¥æŠŠå½“å‰ç›®å½•ä¸‹node_moduleså­ç›®å½•é‡Œè¾¹çš„å¯¹åº”æ¨¡å—æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ã€‚</package></li>
<li>ä½¿ç”¨npm update <package> -gå¯ä»¥æŠŠå…¨å±€å®‰è£…çš„å¯¹åº”å‘½ä»¤è¡Œç¨‹åºæ›´æ–°è‡³æœ€æ–°ç‰ˆã€‚</package></li>
<li>ä½¿ç”¨npm cache clearå¯ä»¥æ¸…ç©ºNPMæœ¬åœ°ç¼“å­˜ï¼Œç”¨äºå¯¹ä»˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬å·å‘å¸ƒæ–°ç‰ˆæœ¬ä»£ç çš„äººã€‚</li>
<li>ä½¿ç”¨npm unpublish <package>@<version>å¯ä»¥æ’¤é”€å‘å¸ƒè‡ªå·±å‘å¸ƒè¿‡çš„æŸä¸ªç‰ˆæœ¬ä»£ç ã€‚</version></package></li>
</ul>
<p>ä½¿ç”¨æ·˜å® NPM é•œåƒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥å®‰è£…æ¨¡å—äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install [name]</span><br></pre></td></tr></table></figure></p>
<h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>è¯·åœ¨æœ¬æœºå®‰è£…Node.jsç¯å¢ƒï¼Œå¹¶ç¡®ä¿nodeå’Œnpmèƒ½æ­£å¸¸è¿è¡Œã€‚</p>
<h3 id="ç¬¬ä¸€ä¸ªNodeç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªNodeç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªNodeç¨‹åº"></a>ç¬¬ä¸€ä¸ªNodeç¨‹åº</h3><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å†™JavaScriptç¨‹åºï¼Œç„¶åä¿å­˜ä¸ºåç¼€ä¸º.jsçš„æ–‡ä»¶ï¼Œå°±å¯ä»¥ç”¨nodeç›´æ¥è¿è¡Œè¿™ä¸ªç¨‹åºäº†ã€‚</p>
<p>Nodeçš„äº¤äº’æ¨¡å¼å’Œç›´æ¥è¿è¡Œ.jsæ–‡ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>ç›´æ¥è¾“å…¥nodeè¿›å…¥äº¤äº’æ¨¡å¼ï¼Œç›¸å½“äºå¯åŠ¨äº†Nodeè§£é‡Šå™¨ï¼Œä½†æ˜¯ç­‰å¾…ä½ ä¸€è¡Œä¸€è¡Œåœ°è¾“å…¥æºä»£ç ï¼Œæ¯è¾“å…¥ä¸€è¡Œå°±æ‰§è¡Œä¸€è¡Œã€‚</p>
<p>ç›´æ¥è¿è¡Œnode hello.jsæ–‡ä»¶ç›¸å½“äºå¯åŠ¨äº†Nodeè§£é‡Šå™¨ï¼Œç„¶åä¸€æ¬¡æ€§æŠŠhello.jsæ–‡ä»¶çš„æºä»£ç ç»™æ‰§è¡Œäº†ï¼Œä½ æ˜¯æ²¡æœ‰æœºä¼šä»¥äº¤äº’çš„æ–¹å¼è¾“å…¥æºä»£ç çš„ã€‚</p>
<p>åœ¨ç¼–å†™JavaScriptä»£ç çš„æ—¶å€™ï¼Œå®Œå…¨å¯ä»¥ä¸€è¾¹åœ¨æ–‡æœ¬ç¼–è¾‘å™¨é‡Œå†™ä»£ç ï¼Œä¸€è¾¹å¼€ä¸€ä¸ªNodeäº¤äº’å¼å‘½ä»¤çª—å£ï¼Œåœ¨å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠéƒ¨åˆ†ä»£ç ç²˜åˆ°å‘½ä»¤è¡Œå»éªŒè¯ï¼Œäº‹åŠåŠŸå€ï¼å‰ææ˜¯å¾—æœ‰ä¸ª27â€™çš„è¶…å¤§æ˜¾ç¤ºå™¨ï¼</p>
<h3 id="æ­å»ºNodeå¼€å‘ç¯å¢ƒ"><a href="#æ­å»ºNodeå¼€å‘ç¯å¢ƒ" class="headerlink" title="æ­å»ºNodeå¼€å‘ç¯å¢ƒ"></a>æ­å»ºNodeå¼€å‘ç¯å¢ƒ</h3><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ¥å¼€å‘Nodeç¨‹åºï¼Œæœ€å¤§çš„ç¼ºç‚¹æ˜¯æ•ˆç‡å¤ªä½ï¼Œè¿è¡ŒNodeç¨‹åºè¿˜éœ€è¦åœ¨å‘½ä»¤è¡Œå•ç‹¬æ•²å‘½ä»¤ã€‚å¦‚æœè¿˜éœ€è¦è°ƒè¯•ç¨‹åºï¼Œå°±æ›´åŠ éº»çƒ¦äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªIDEé›†æˆå¼€å‘ç¯å¢ƒï¼Œè®©æˆ‘ä»¬èƒ½åœ¨ä¸€ä¸ªç¯å¢ƒé‡Œç¼–ç ã€è¿è¡Œã€è°ƒè¯•ï¼Œè¿™æ ·å°±å¯ä»¥å¤§å¤§æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p>Javaçš„é›†æˆå¼€å‘ç¯å¢ƒæœ‰Eclipseï¼ŒIntellij ideaç­‰ï¼ŒC#çš„é›†æˆå¼€å‘ç¯å¢ƒæœ‰Visual Studioï¼Œé‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼šNode.jsçš„é›†æˆå¼€å‘ç¯å¢ƒåˆ°åº•å“ªå®¶å¼ºï¼Ÿ</p>
<p>è€ƒå¯ŸNode.jsçš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œé‡ç‚¹æ”¾åœ¨å¯åŠ¨é€Ÿåº¦å¿«ï¼Œæ‰§è¡Œç®€å•ï¼Œè°ƒè¯•æ–¹ä¾¿è¿™ä¸‰ç‚¹ä¸Šã€‚å½“ç„¶ï¼Œå…è´¹ä½¿ç”¨æ˜¯ä¸€ä¸ªåŠ åˆ†é¡¹ã€‚</p>
<p>ç»¼åˆè€ƒå¯Ÿåï¼Œæˆ‘ä»¬éš†é‡å‘å¤§å®¶æ¨èNode.jsé›†æˆå¼€å‘ç¯å¢ƒï¼š vscode<br>Visual Studio Codeç”±å¾®è½¯å‡ºå“ï¼Œä½†å®ƒä¸æ˜¯é‚£ä¸ªå¤§å—å¤´çš„Visual Studioï¼Œå®ƒæ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„è¿·ä½ Visual Studioï¼Œå¹¶ä¸”ï¼ŒVisual Studio Codeå¯ä»¥è·¨ï¼å¹³ï¼å°ï¼Windowsã€Macå’ŒLinuxé€šç”¨ã€‚</p>
<p>è¿è¡Œå’Œè°ƒè¯•JavaScript<br>åœ¨VS Codeä¸­ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°è¿è¡ŒJavaScriptæ–‡ä»¶ã€‚</p>
<p>VS Codeä»¥æ–‡ä»¶å¤¹ä½œä¸ºå·¥ç¨‹ç›®å½•ï¼ˆWorkspace Dirï¼‰ï¼Œæ‰€æœ‰çš„JavaScriptæ–‡ä»¶éƒ½å­˜æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚æ­¤å¤–ï¼ŒVS Codeåœ¨å·¥ç¨‹ç›®å½•ä¸‹è¿˜éœ€è¦ä¸€ä¸ª.vscodeçš„é…ç½®ç›®å½•ï¼Œé‡Œé¢å­˜æ”¾é‡ŒVS Codeéœ€è¦çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬åœ¨C:\Work\ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªhelloç›®å½•ä½œä¸ºå·¥ç¨‹ç›®å½•ï¼Œå¹¶ç¼–å†™äº†ä¸€ä¸ªhello.jsæ–‡ä»¶ï¼Œåˆ™è¯¥å·¥ç¨‹ç›®å½•çš„ç»“æ„å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hello/ &lt;-- workspace dir</span><br><span class="line">|</span><br><span class="line">+- hello.js &lt;-- JavaScript file</span><br><span class="line">|</span><br><span class="line">+- .vscode/  &lt;-- VS Code config</span><br><span class="line">   |</span><br><span class="line">   +- launch.json &lt;-- VS Code config file for JavaScript</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥ç”¨VS Codeå¿«é€Ÿåˆ›å»ºlaunch.jsonï¼Œç„¶åä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Run hello.js&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;program&quot;: &quot;$&#123;workspaceRoot&#125;/hello.js&quot;,</span><br><span class="line">            &quot;stopOnEntry&quot;: false,</span><br><span class="line">            &quot;args&quot;: [],</span><br><span class="line">            &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,</span><br><span class="line">            &quot;preLaunchTask&quot;: null,</span><br><span class="line">            &quot;runtimeExecutable&quot;: null,</span><br><span class="line">            &quot;runtimeArgs&quot;: [</span><br><span class="line">                &quot;--nolazy&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;env&quot;: &#123;</span><br><span class="line">                &quot;NODE_ENV&quot;: &quot;development&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;externalConsole&quot;: false,</span><br><span class="line">            &quot;sourceMaps&quot;: false,</span><br><span class="line">            &quot;outDir&quot;: null</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æœ‰äº†é…ç½®æ–‡ä»¶ï¼Œå³å¯ä½¿ç”¨VS Codeè°ƒè¯•JavaScriptã€‚</p>
<h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>åœ¨è®¡ç®—æœºç¨‹åºçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéšç€ç¨‹åºä»£ç è¶Šå†™è¶Šå¤šï¼Œåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œä»£ç å°±ä¼šè¶Šæ¥è¶Šé•¿ï¼Œè¶Šæ¥è¶Šä¸å®¹æ˜“ç»´æŠ¤ã€‚</p>
<p>ä¸ºäº†ç¼–å†™å¯ç»´æŠ¤çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠå¾ˆå¤šå‡½æ•°åˆ†ç»„ï¼Œåˆ†åˆ«æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œè¿™æ ·ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«çš„ä»£ç å°±ç›¸å¯¹è¾ƒå°‘ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½é‡‡ç”¨è¿™ç§ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚åœ¨Nodeç¯å¢ƒä¸­ï¼Œä¸€ä¸ª.jsæ–‡ä»¶å°±ç§°ä¹‹ä¸ºä¸€ä¸ªæ¨¡å—ï¼ˆmoduleï¼‰ã€‚</p>
<p>ä½¿ç”¨æ¨¡å—æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>
<p>æœ€å¤§çš„å¥½å¤„æ˜¯å¤§å¤§æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚å…¶æ¬¡ï¼Œç¼–å†™ä»£ç ä¸å¿…ä»é›¶å¼€å§‹ã€‚å½“ä¸€ä¸ªæ¨¡å—ç¼–å†™å®Œæ¯•ï¼Œå°±å¯ä»¥è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œä¹Ÿç»å¸¸å¼•ç”¨å…¶ä»–æ¨¡å—ï¼ŒåŒ…æ‹¬Nodeå†…ç½®çš„æ¨¡å—å’Œæ¥è‡ªç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€‚</p>
<p>ä½¿ç”¨æ¨¡å—è¿˜å¯ä»¥é¿å…å‡½æ•°åå’Œå˜é‡åå†²çªã€‚ç›¸åŒåå­—çš„å‡½æ•°å’Œå˜é‡å®Œå…¨å¯ä»¥åˆ†åˆ«å­˜åœ¨ä¸åŒçš„æ¨¡å—ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è‡ªå·±åœ¨ç¼–å†™æ¨¡å—æ—¶ï¼Œä¸å¿…è€ƒè™‘åå­—ä¼šä¸å…¶ä»–æ¨¡å—å†²çªã€‚</p>
<p>åœ¨ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªhello.jsæ–‡ä»¶ï¼Œè¿™ä¸ªhello.jsæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—çš„åå­—å°±æ˜¯æ–‡ä»¶åï¼ˆå»æ‰.jsåç¼€ï¼‰ï¼Œæ‰€ä»¥hello.jsæ–‡ä»¶å°±æ˜¯åä¸ºhelloçš„æ¨¡å—ã€‚</p>
<p>æˆ‘ä»¬æŠŠhello.jsæ”¹é€ ä¸€ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line"></span><br><span class="line">var s = &apos;Hello&apos;;</span><br><span class="line"></span><br><span class="line">function greet(name) &#123;</span><br><span class="line">    console.log(s + &apos;, &apos; + name + &apos;!&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = greet;</span><br></pre></td></tr></table></figure></p>
<p>å‡½æ•°greet()æ˜¯æˆ‘ä»¬åœ¨helloæ¨¡å—ä¸­å®šä¹‰çš„ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°æœ€åä¸€è¡Œæ˜¯ä¸€ä¸ªå¥‡æ€ªçš„èµ‹å€¼è¯­å¥ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼ŒæŠŠå‡½æ•°greetä½œä¸ºæ¨¡å—çš„è¾“å‡ºæš´éœ²å‡ºå»ï¼Œè¿™æ ·å…¶ä»–æ¨¡å—å°±å¯ä»¥ä½¿ç”¨greetå‡½æ•°äº†ã€‚</p>
<p>é—®é¢˜æ˜¯å…¶ä»–æ¨¡å—æ€ä¹ˆä½¿ç”¨helloæ¨¡å—çš„è¿™ä¸ªgreetå‡½æ•°å‘¢ï¼Ÿæˆ‘ä»¬å†ç¼–å†™ä¸€ä¸ªmain.jsæ–‡ä»¶ï¼Œè°ƒç”¨helloæ¨¡å—çš„greetå‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line"></span><br><span class="line">// å¼•å…¥helloæ¨¡å—:</span><br><span class="line">var greet = require(&apos;./hello&apos;);</span><br><span class="line"></span><br><span class="line">var s = &apos;Michael&apos;;</span><br><span class="line"></span><br><span class="line">greet(s); // Hello, Michael!</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„åˆ°å¼•å…¥helloæ¨¡å—ç”¨Nodeæä¾›çš„requireå‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var greet = require(&apos;./hello&apos;);</span><br></pre></td></tr></table></figure></p>
<p>å¼•å…¥çš„æ¨¡å—ä½œä¸ºå˜é‡ä¿å­˜åœ¨greetå˜é‡ä¸­ï¼Œé‚£greetå˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿå…¶å®å˜é‡greetå°±æ˜¯åœ¨hello.jsä¸­æˆ‘ä»¬ç”¨module.exports = greet;è¾“å‡ºçš„greetå‡½æ•°ã€‚æ‰€ä»¥ï¼Œmain.jså°±æˆåŠŸåœ°å¼•ç”¨äº†hello.jsæ¨¡å—ä¸­å®šä¹‰çš„greet()å‡½æ•°ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒäº†ã€‚</p>
<p>åœ¨ä½¿ç”¨require()å¼•å…¥æ¨¡å—çš„æ—¶å€™ï¼Œè¯·æ³¨æ„æ¨¡å—çš„ç›¸å¯¹è·¯å¾„ã€‚å› ä¸ºmain.jså’Œhello.jsä½äºåŒä¸€ä¸ªç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨äº†å½“å‰ç›®å½•.ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var greet = require(&apos;./hello&apos;); // ä¸è¦å¿˜äº†å†™ç›¸å¯¹ç›®å½•!</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœåªå†™æ¨¡å—åï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var greet = require(&apos;hello&apos;);</span><br></pre></td></tr></table></figure></p>
<p>åˆ™Nodeä¼šä¾æ¬¡åœ¨å†…ç½®æ¨¡å—ã€å…¨å±€æ¨¡å—å’Œå½“å‰æ¨¡å—ä¸‹æŸ¥æ‰¾hello.jsï¼Œä½ å¾ˆå¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.js</span><br><span class="line">    throw err;</span><br><span class="line">          ^</span><br><span class="line">Error: Cannot find module &apos;hello&apos;</span><br><span class="line">    at Function.Module._resolveFilename</span><br><span class="line">    at Function.Module._load</span><br><span class="line">    ...</span><br><span class="line">    at Function.Module._load</span><br><span class="line">    at Function.Module.runMain</span><br></pre></td></tr></table></figure></p>
<p>é‡åˆ°è¿™ä¸ªé”™è¯¯ï¼Œä½ è¦æ£€æŸ¥ï¼š</p>
<ul>
<li>æ¨¡å—åæ˜¯å¦å†™å¯¹äº†ï¼›</li>
<li>æ¨¡å—æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼›</li>
<li>ç›¸å¯¹è·¯å¾„æ˜¯å¦å†™å¯¹äº†ã€‚</li>
</ul>
<h4 id="CommonJSè§„èŒƒ"><a href="#CommonJSè§„èŒƒ" class="headerlink" title="CommonJSè§„èŒƒ"></a>CommonJSè§„èŒƒ</h4><p>è¿™ç§æ¨¡å—åŠ è½½æœºåˆ¶è¢«ç§°ä¸ºCommonJSè§„èŒƒã€‚åœ¨è¿™ä¸ªè§„èŒƒä¸‹ï¼Œæ¯ä¸ª.jsæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒä»¬å†…éƒ¨å„è‡ªä½¿ç”¨çš„å˜é‡åå’Œå‡½æ•°åéƒ½äº’ä¸å†²çªï¼Œä¾‹å¦‚ï¼Œhello.jså’Œmain.jséƒ½ç”³æ˜äº†å…¨å±€å˜é‡var s = â€˜xxxâ€™ï¼Œä½†äº’ä¸å½±å“ã€‚</p>
<p>ä¸€ä¸ªæ¨¡å—æƒ³è¦å¯¹å¤–æš´éœ²å˜é‡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å˜é‡ï¼‰ï¼Œå¯ä»¥ç”¨module.exports = variable;ï¼Œä¸€ä¸ªæ¨¡å—è¦å¼•ç”¨å…¶ä»–æ¨¡å—æš´éœ²çš„å˜é‡ï¼Œç”¨var ref = require(â€˜module_nameâ€™);å°±æ‹¿åˆ°äº†å¼•ç”¨æ¨¡å—çš„å˜é‡ã€‚</p>
<h4 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h4><p>è¦åœ¨æ¨¡å—ä¸­å¯¹å¤–è¾“å‡ºå˜é‡ï¼Œç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">module.exports = variable;</span><br></pre></td></tr></table></figure></p>
<p>è¾“å‡ºçš„å˜é‡å¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ã€å‡½æ•°ã€æ•°ç»„ç­‰ç­‰ã€‚</p>
<p>è¦å¼•å…¥å…¶ä»–æ¨¡å—è¾“å‡ºçš„å¯¹è±¡ï¼Œç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var foo = require(&apos;other_module&apos;);</span><br></pre></td></tr></table></figure></p>
<p>å¼•å…¥çš„å¯¹è±¡å…·ä½“æ˜¯ä»€ä¹ˆï¼Œå–å†³äºå¼•å…¥æ¨¡å—è¾“å‡ºçš„å¯¹è±¡ã€‚</p>
<h4 id="module-exports-vs-exports"><a href="#module-exports-vs-exports" class="headerlink" title="module.exports vs exports"></a>module.exports vs exports</h4><p>å¾ˆå¤šæ—¶å€™ï¼Œä½ ä¼šçœ‹åˆ°ï¼Œåœ¨Nodeç¯å¢ƒä¸­ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªæ¨¡å—ä¸­è¾“å‡ºå˜é‡ï¼š</p>
<p>æ–¹æ³•ä¸€ï¼šå¯¹module.exportsèµ‹å€¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// hello.js</span><br><span class="line"></span><br><span class="line">function hello() &#123;</span><br><span class="line">    console.log(&apos;Hello, world!&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function greet(name) &#123;</span><br><span class="line">    console.log(&apos;Hello, &apos; + name + &apos;!&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    hello: hello,</span><br><span class="line">    greet: greet</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•äºŒï¼šç›´æ¥ä½¿ç”¨exportsï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// hello.js</span><br><span class="line"></span><br><span class="line">function hello() &#123;</span><br><span class="line">    console.log(&apos;Hello, world!&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function greet(name) &#123;</span><br><span class="line">    console.log(&apos;Hello, &apos; + name + &apos;!&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function hello() &#123;</span><br><span class="line">    console.log(&apos;Hello, world!&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.hello = hello;</span><br><span class="line">exports.greet = greet;</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯ä½ ä¸å¯ä»¥ç›´æ¥å¯¹exportsèµ‹å€¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ä»£ç å¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯æ¨¡å—å¹¶æ²¡æœ‰è¾“å‡ºä»»ä½•å˜é‡:</span><br><span class="line">exports = &#123;</span><br><span class="line">    hello: hello,</span><br><span class="line">    greet: greet</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

                
                <div class="readmore">
                    <a href="/2019/08/08/node1/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
            <div class="post-item">
                <h1>
                    <a href="/2019/08/07/WebSocket/">
                        WebSocket
                    </a>
                </h1>
                <div class="create">
                    <span>åˆ›å»ºäº</span>
                    
                        <time datetime="2019-08-07T12:42:20.000Z">
                            2019-08-07
                        </time>
                    
                    <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/åŸºç¡€å‰ç«¯æŠ€æœ¯/">åŸºç¡€å‰ç«¯æŠ€æœ¯</a></li></ul>
                </div>
                
                    <h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>WebSocketæ˜¯HTML5æ–°å¢çš„åè®®ï¼Œå®ƒçš„ç›®çš„æ˜¯åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªä¸å—é™çš„åŒå‘é€šä¿¡çš„é€šé“ï¼Œæ¯”å¦‚è¯´ï¼ŒæœåŠ¡å™¨å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»å‘é€æ¶ˆæ¯ç»™æµè§ˆå™¨ã€‚</p>
<p>WebSocket æ˜¯ HTML5 å¼€å§‹æä¾›çš„ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šè®¯çš„åè®®ã€‚</p>
<p>WebSocketä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å˜å¾—æ›´åŠ ç®€å•ï¼Œå…è®¸æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€‚åœ¨ WebSocket API ä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ï¼Œä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥åˆ›å»ºæŒä¹…æ€§çš„è¿æ¥ï¼Œå¹¶è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“ã€‚</p>
<p>åœ¨ WebSocket API ä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚</p>
<p>ç°åœ¨ï¼Œå¾ˆå¤šç½‘ç«™ä¸ºäº†å®ç°æ¨é€æŠ€æœ¯ï¼Œæ‰€ç”¨çš„æŠ€æœ¯éƒ½æ˜¯ Ajax è½®è¯¢ã€‚è½®è¯¢æ˜¯åœ¨ç‰¹å®šçš„çš„æ—¶é—´é—´éš”ï¼ˆå¦‚æ¯1ç§’ï¼‰ï¼Œç”±æµè§ˆå™¨å¯¹æœåŠ¡å™¨å‘å‡ºHTTPè¯·æ±‚ï¼Œç„¶åç”±æœåŠ¡å™¨è¿”å›æœ€æ–°çš„æ•°æ®ç»™å®¢æˆ·ç«¯çš„æµè§ˆå™¨ã€‚è¿™ç§ä¼ ç»Ÿçš„æ¨¡å¼å¸¦æ¥å¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå³æµè§ˆå™¨éœ€è¦ä¸æ–­çš„å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œç„¶è€ŒHTTPè¯·æ±‚å¯èƒ½åŒ…å«è¾ƒé•¿çš„å¤´éƒ¨ï¼Œå…¶ä¸­çœŸæ­£æœ‰æ•ˆçš„æ•°æ®å¯èƒ½åªæ˜¯å¾ˆå°çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¾ç„¶è¿™æ ·ä¼šæµªè´¹å¾ˆå¤šçš„å¸¦å®½ç­‰èµ„æºã€‚</p>
<p>HTML5 å®šä¹‰çš„ WebSocket åè®®ï¼Œèƒ½æ›´å¥½çš„èŠ‚çœæœåŠ¡å™¨èµ„æºå’Œå¸¦å®½ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ›´å®æ—¶åœ°è¿›è¡Œé€šè®¯ã€‚<br><img src="/2019/08/07/WebSocket/01.png" alt="01.png"><br>æµè§ˆå™¨é€šè¿‡ JavaScript å‘æœåŠ¡å™¨å‘å‡ºå»ºç«‹ WebSocket è¿æ¥çš„è¯·æ±‚ï¼Œè¿æ¥å»ºç«‹ä»¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥é€šè¿‡ TCP è¿æ¥ç›´æ¥äº¤æ¢æ•°æ®ã€‚</p>
<p>å½“ä½ è·å– Web Socket è¿æ¥åï¼Œä½ å¯ä»¥é€šè¿‡ send() æ–¹æ³•æ¥å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œå¹¶é€šè¿‡ onmessage äº‹ä»¶æ¥æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p>
<p>ä»¥ä¸‹ API ç”¨äºåˆ›å»º WebSocket å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var Socket = new WebSocket(url, [protocol] );</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä»£ç ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•° url, æŒ‡å®šè¿æ¥çš„ URLã€‚ç¬¬äºŒä¸ªå‚æ•° protocol æ˜¯å¯é€‰çš„ï¼ŒæŒ‡å®šäº†å¯æ¥å—çš„å­åè®®ã€‚</p>
<h3 id="WebSocket-å±æ€§"><a href="#WebSocket-å±æ€§" class="headerlink" title="WebSocket å±æ€§"></a>WebSocket å±æ€§</h3><p>ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„å±æ€§ã€‚å‡å®šæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šä»£ç åˆ›å»ºäº† Socket å¯¹è±¡ï¼š<br><img src="/2019/08/07/WebSocket/02.png" alt="02.png"></p>
<h3 id="WebSocket-äº‹ä»¶"><a href="#WebSocket-äº‹ä»¶" class="headerlink" title="WebSocket äº‹ä»¶"></a>WebSocket äº‹ä»¶</h3><p>ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„ç›¸å…³äº‹ä»¶ã€‚å‡å®šæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šä»£ç åˆ›å»ºäº† Socket å¯¹è±¡ï¼š<br><img src="/2019/08/07/WebSocket/03.png" alt="03.png"></p>
<h3 id="WebSocket-æ–¹æ³•"><a href="#WebSocket-æ–¹æ³•" class="headerlink" title="WebSocket æ–¹æ³•"></a>WebSocket æ–¹æ³•</h3><p>ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„ç›¸å…³æ–¹æ³•ã€‚å‡å®šæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šä»£ç åˆ›å»ºäº† Socket å¯¹è±¡ï¼š<br><img src="/2019/08/07/WebSocket/04.png" alt="04.png"></p>
<p>WebSocket åè®®æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸºäº TCP çš„åè®®ã€‚</p>
<p>ä¸ºäº†å»ºç«‹ä¸€ä¸ª WebSocket è¿æ¥ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨é¦–å…ˆè¦å‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚å’Œé€šå¸¸çš„ HTTP è¯·æ±‚ä¸åŒï¼ŒåŒ…å«äº†ä¸€äº›é™„åŠ å¤´ä¿¡æ¯ï¼Œå…¶ä¸­é™„åŠ å¤´ä¿¡æ¯â€Upgrade: WebSocketâ€è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªç”³è¯·åè®®å‡çº§çš„ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯è§£æè¿™äº›é™„åŠ çš„å¤´ä¿¡æ¯ç„¶åäº§ç”Ÿåº”ç­”ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ WebSocket è¿æ¥å°±å»ºç«‹èµ·æ¥äº†ï¼ŒåŒæ–¹å°±å¯ä»¥é€šè¿‡è¿™ä¸ªè¿æ¥é€šé“è‡ªç”±çš„ä¼ é€’ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™ä¸ªè¿æ¥ä¼šæŒç»­å­˜åœ¨ç›´åˆ°å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ç«¯çš„æŸä¸€æ–¹ä¸»åŠ¨çš„å…³é—­è¿æ¥ã€‚</p>

                
                <div class="readmore">
                    <a href="/2019/08/07/WebSocket/">
                        é˜…è¯»æ›´å¤š
                    </a>
                </div>
            </div>
        
    </div>


    <div id="content-aside">
    <div class="content-aside-owner">
        <div id="owner">
    <div class="avatar-bg">
        <div class="index-page">
            <div class="banner">
                <div class="slide slide1">
                    <div class="bg-wrapper">
                        <div class="bg" id="container_left">
                            <div id="canvas_left"></div>
                        </div>
                    </div>
                </div>
                <div class="slide slide2">
                    <div class="bg-wrapper">
                        <div class="bg" id="container_right">
                            <div id="canvas_right"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a href="/"><img class="avatar" src="/images/avatar.jpg" alt=""></a>
    <a href="/"><h3 class="author">I&#39;m xiedandan</h3></a>
    <h4>^_^</h4>
    <div class="social">
        
            
              <a href="https://github.com/xdd7130" title="github" class="fa fa-github" target="_blank"></a>
            
        
            
              <a href="#" title="weibo" class="fa fa-weibo" target="_blank"></a>
            
        
    </div>
</div>
    </div>
    
        <div class="content-aside-about">
            <h2>
                <a href="/about">å…³äº</a>
            </h2>
        </div>
    
    <div class="content-aside-tags">
        <h2>
            <a href="/tags">
                æ ‡ç­¾
                <sup style="font-size: 12px">
                    [32]
                </sup>
            </a>
        </h2>
    </div>
    
<aside id="categories">
    <h2>åˆ†ç±»</h2>
    
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ArcGIS/">ArcGIS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cesium/">Cesium</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/å…¶ä»–/">å…¶ä»–</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/åŸºç¡€å‰ç«¯æŠ€æœ¯/">åŸºç¡€å‰ç«¯æŠ€æœ¯</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/å°ç¨‹åº/">å°ç¨‹åº</a></li></ul>
    
</aside>

    
<aside id="acchives">
    <h2>å½’æ¡£</h2>
    
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    
</aside>

</div>

</div>
<nav id="pagination" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/">ä¸‹ä¸€é¡µ &raquo;</a>
</nav>

    </div>
</div>
<footer id="footer">
     <div id="copyright">&copy; I&#39;m xiedandan  2021</div>
     
             <!-- ä¸è’œå­ç»Ÿè®¡ -->
             <span id="busuanzi_container_site_pv">
                     æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv" style='color:#17a167'></span>æ¬¡
             </span>
             <span class="post-meta-divider">|</span>
             <span id="busuanzi_container_site_uv">
                     æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"  style='color:#17a167'></span>äºº
             </span>
             <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
       
    <div id="theme">
        Powered by <a href="http://hexo.io">Hexo</a>. Theme by <a href="https://github.com/markyong/hexo-theme-stage">Stage</a>
    </div>
</footer>
<script src="/lib/js/waterrippleeffect.min.js"></script>
<script src="/js/header-bg.main.js"></script>

    <script src="/lib/js/cav.js"></script>
    <script src="/js/avatar-bg.main.js"></script>

</body>
</html>
