
<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <title>ES6(äºŒ) Setå’ŒMap | DD_XIEçš„å­¦ä¹ ç¬”è®°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="">
    <meta name="description" content="ğŸŒ´ Set å’Œ WeakSetæ•°æ®ç»“æ„ğŸ‘‰ Setï¼š1ã€ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚
12345678910111213141516//addæ–¹æ³•const s = new Set();[2, 3, 5, 4, 5, 2, 2].forEach(x =&amp;gt; s.add(x));for (let i of s) &amp;#123;console.log(i);&amp;#125;// 2 3 5 4// ä¸€ã€ æ•°ç»„å»é‡[...new Set(array)]// äºŒã€Array.fromæ–¹æ³•å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚const items = new Set([1, 2...">
    
        <link rel="icon" href="/favicon.ico">
    
    
        
            <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
        
            <link rel="stylesheet" href="/css/stage.css">
        
            <link rel="stylesheet" href="/css/avatar-bg.css">
        
    
</head>
</html>
<body>
<header id="header">
    <div class="menu">
        <i class="fa fa-bars"></i>
    </div>
    <div class="header-main">
        <h1><a href="/">DD_XIEçš„å­¦ä¹ ç¬”è®°</a></h1>
    </div>
    <div id="nav">
        <div class="nav-img" id="nav-img"></div>
        <div class="sentences">
            å‘ç€é£ï¼Œæ‹¥æŠ±å½©è™¹ï¼Œå‹‡æ•¢çš„å‘å‰èµ°ã€‚
        </div>
    </div>
</header>

<div id="content-outer">
    <div id="content-inner">
        <div class="clearfix">
    <article id="post">
        <h1>ES6(äºŒ) Setå’ŒMap</h1>
        <div class="create">
            <span>åˆ›å»ºäº</span>
            
                <time datetime="2020-11-23T11:18:34.000Z">
                    2020-11-23
                </time>
            
            <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/åŸºç¡€å‰ç«¯æŠ€æœ¯/">åŸºç¡€å‰ç«¯æŠ€æœ¯</a></li></ul>
        </div>
        <h3 id="ğŸŒ´-Set-å’Œ-WeakSetæ•°æ®ç»“æ„"><a href="#ğŸŒ´-Set-å’Œ-WeakSetæ•°æ®ç»“æ„" class="headerlink" title="ğŸŒ´ Set å’Œ WeakSetæ•°æ®ç»“æ„"></a>ğŸŒ´ Set å’Œ WeakSetæ•°æ®ç»“æ„</h3><h4 id="ğŸ‘‰-Setï¼š"><a href="#ğŸ‘‰-Setï¼š" class="headerlink" title="ğŸ‘‰ Setï¼š"></a>ğŸ‘‰ Setï¼š</h4><p>1ã€ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//addæ–¹æ³•</span><br><span class="line">const s = new Set();</span><br><span class="line"></span><br><span class="line">[2, 3, 5, 4, 5, 2, 2].forEach(x =&gt; s.add(x));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">let</span> i of s) &#123;</span><br><span class="line">console.log(i);</span><br><span class="line">&#125;</span><br><span class="line">// 2 3 5 4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ä¸€ã€ æ•°ç»„å»é‡</span><br><span class="line">[...new Set(array)]</span><br><span class="line">// äºŒã€Array.fromæ–¹æ³•å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚</span><br><span class="line">const items = new Set([1, 2, 3, 4, 5]);</span><br><span class="line">const array = Array.from(items);</span><br></pre></td></tr></table></figure>
<p>2ã€Set å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</p>
<ul>
<li>å®ä¾‹å±æ€§ï¼š<br>Set.prototype.constructorï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯Setå‡½æ•°ã€‚<br>Set.prototype.sizeï¼šè¿”å›Setå®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚</li>
<li>å®ä¾‹æ–¹æ³•:<br>Set.prototype.add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚<br>Set.prototype.delete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚<br>Set.prototype.has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºSetçš„æˆå‘˜ã€‚<br>Set.prototype.clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li>
</ul>
<p>ä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s.add(1).add(2).add(2);</span><br><span class="line">// æ³¨æ„2è¢«åŠ å…¥äº†ä¸¤æ¬¡</span><br><span class="line"></span><br><span class="line">s.size // 2</span><br><span class="line"></span><br><span class="line">s.has(1) // <span class="literal">true</span></span><br><span class="line">s.has(2) // <span class="literal">true</span></span><br><span class="line">s.has(3) // <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">s.delete(2);</span><br><span class="line">s.has(2) // <span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<p>3ã€éå†æ“ä½œ</p>
<p>å››ä¸ªéå†æ–¹æ³•ï¼š</p>
<p>Set.prototype.keys()ï¼šè¿”å›é”®åçš„éå†å™¨<br>Set.prototype.values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨<br>Set.prototype.entries()ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨<br>Set.prototype.forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</p>
<h4 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h4><p>WeakSet ç»“æ„ä¸ Set ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸ Set æœ‰ä¸¤ä¸ªåŒºåˆ«:<br>1ã€WeakSet çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚<br>2ã€WeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨</p>
<p>WeakSet ç»“æ„æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<p>WeakSet.prototype.add(value)ï¼šå‘ WeakSet å®ä¾‹æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ã€‚<br>WeakSet.prototype.delete(value)ï¼šæ¸…é™¤ WeakSet å®ä¾‹çš„æŒ‡å®šæˆå‘˜ã€‚<br>WeakSet.prototype.has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªå€¼æ˜¯å¦åœ¨ WeakSet å®ä¾‹ä¹‹ä¸­</p>
<h3 id="ğŸŒ´-Map-å’Œ-WeakMapæ•°æ®ç»“æ„"><a href="#ğŸŒ´-Map-å’Œ-WeakMapæ•°æ®ç»“æ„" class="headerlink" title="ğŸŒ´ Map å’Œ WeakMapæ•°æ®ç»“æ„"></a>ğŸŒ´ Map å’Œ WeakMapæ•°æ®ç»“æ„</h3><h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>JavaScript çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHash ç»“æ„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚<br>ES6 æä¾›äº† Map æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const m = new Map();</span><br><span class="line">const o = &#123;p: <span class="string">'Hello World'</span>&#125;;</span><br><span class="line"></span><br><span class="line">m.set(o, <span class="string">'content'</span>)</span><br><span class="line">m.get(o) // <span class="string">"content"</span></span><br><span class="line"></span><br><span class="line">m.has(o) // <span class="literal">true</span></span><br><span class="line">m.delete(o) // <span class="literal">true</span></span><br><span class="line">m.has(o) // <span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœå¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡èµ‹å€¼ï¼Œåé¢çš„å€¼å°†è¦†ç›–å‰é¢çš„å€¼ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const map = new Map();</span><br><span class="line"></span><br><span class="line">map</span><br><span class="line">.<span class="built_in">set</span>(1, <span class="string">'aaa'</span>)</span><br><span class="line">.<span class="built_in">set</span>(1, <span class="string">'bbb'</span>);</span><br><span class="line"></span><br><span class="line">map.get(1) // <span class="string">"bbb"</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœè¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œåˆ™è¿”å›undefinedã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new Map().get(<span class="string">'asfddfsasadf'</span>)</span><br><span class="line">// undefined</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼Œåªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMap ç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const map = new Map();</span><br><span class="line"></span><br><span class="line">map.set([<span class="string">'a'</span>], 555);</span><br><span class="line">map.get([<span class="string">'a'</span>]) // undefined</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä»£ç çš„setå’Œgetæ–¹æ³•ï¼Œè¡¨é¢æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„æ•°ç»„å®ä¾‹ï¼Œå†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤getæ–¹æ³•æ— æ³•è¯»å–è¯¥é”®ï¼Œè¿”å›undefinedã€‚<br>åŒæ ·çš„å€¼çš„ä¸¤ä¸ªå®ä¾‹ï¼Œåœ¨ Map ç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const map = new Map();</span><br><span class="line"></span><br><span class="line">const k1 = [<span class="string">'a'</span>];</span><br><span class="line">const k2 = [<span class="string">'a'</span>];</span><br><span class="line"></span><br><span class="line">map</span><br><span class="line">.<span class="built_in">set</span>(k1, 111)</span><br><span class="line">.<span class="built_in">set</span>(k2, 222);</span><br><span class="line"></span><br><span class="line">map.get(k1) // 111</span><br><span class="line">map.get(k2) // 222</span><br></pre></td></tr></table></figure></p>
<p>å¦å¤–ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> map = new Map();</span><br><span class="line"></span><br><span class="line">map.set(-0, 123);</span><br><span class="line">map.get(+0) // 123</span><br><span class="line"></span><br><span class="line">map.set(<span class="literal">true</span>, 1);</span><br><span class="line">map.set(<span class="string">'true'</span>, 2);</span><br><span class="line">map.get(<span class="literal">true</span>) // 1</span><br><span class="line"></span><br><span class="line">map.set(undefined, 3);</span><br><span class="line">map.set(null, 4);</span><br><span class="line">map.get(undefined) // 3</span><br><span class="line"></span><br><span class="line">map.set(NaN, 123);</span><br><span class="line">map.get(NaN) // 123</span><br></pre></td></tr></table></figure></p>
<h4 id="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h4><p>1ã€size å±æ€§<br>sizeå±æ€§è¿”å› Map ç»“æ„çš„æˆå‘˜æ€»æ•°<br>2ã€Map.prototype.set(key, value)<br>setæ–¹æ³•è®¾ç½®é”®åkeyå¯¹åº”çš„é”®å€¼ä¸ºvalueï¼Œç„¶åè¿”å›æ•´ä¸ª Map ç»“æ„ã€‚å¦‚æœkeyå·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚setæ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„Mapå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚<br>3ã€Map.prototype.get(key)<br>getæ–¹æ³•è¯»å–keyå¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°keyï¼Œè¿”å›undefinedã€‚<br>4ã€Map.prototype.has(key)<br>hasæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­ã€‚<br>5ã€Map.prototype.delete(key)<br>deleteæ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›trueã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›falseã€‚<br>6ã€Map.prototype.clear()<br>clearæ–¹æ³•æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p>
<h4 id="éå†æ–¹æ³•"><a href="#éå†æ–¹æ³•" class="headerlink" title="éå†æ–¹æ³•"></a>éå†æ–¹æ³•</h4><p>Map.prototype.keys()ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚<br>Map.prototype.values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚<br>Map.prototype.entries()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚<br>Map.prototype.forEach()ï¼šéå† Map çš„æ‰€æœ‰æˆå‘˜ã€‚</p>
<p>Map ç»“æ„è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const map = new Map([</span><br><span class="line">  [1, <span class="string">'one'</span>],</span><br><span class="line">  [2, <span class="string">'two'</span>],</span><br><span class="line">  [3, <span class="string">'three'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">[...map.keys()]</span><br><span class="line">// [1, 2, 3]</span><br><span class="line"></span><br><span class="line">[...map.values()]</span><br><span class="line">// [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>]</span><br><span class="line"></span><br><span class="line">[...map.entries()]</span><br><span class="line">// [[1,<span class="string">'one'</span>], [2, <span class="string">'two'</span>], [3, <span class="string">'three'</span>]]</span><br><span class="line"></span><br><span class="line">[...map]</span><br><span class="line">// [[1,<span class="string">'one'</span>], [2, <span class="string">'two'</span>], [3, <span class="string">'three'</span>]]</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><a href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢" class="headerlink" title="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"></a>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</h4><p>1ã€Map è½¬ä¸ºæ•°ç»„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const myMap = new Map()</span><br><span class="line">  .<span class="built_in">set</span>(<span class="literal">true</span>, 7)</span><br><span class="line">  .<span class="built_in">set</span>(&#123;foo: 3&#125;, [<span class="string">'abc'</span>]);</span><br><span class="line">[...myMap]</span><br><span class="line">// [ [ <span class="literal">true</span>, 7 ], [ &#123; foo: 3 &#125;, [ <span class="string">'abc'</span> ] ] ]</span><br></pre></td></tr></table></figure></p>
<p>2ã€æ•°ç»„ è½¬ä¸º Map<br>å°†æ•°ç»„ä¼ å…¥ Map æ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥è½¬ä¸º Mapã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new Map([</span><br><span class="line">  [<span class="literal">true</span>, 7],</span><br><span class="line">  [&#123;foo: 3&#125;, [<span class="string">'abc'</span>]]</span><br><span class="line">])</span><br><span class="line">// Map &#123;</span><br><span class="line">//   <span class="literal">true</span> =&gt; 7,</span><br><span class="line">//   Object &#123;foo: 3&#125; =&gt; [<span class="string">'abc'</span>]</span><br><span class="line">// &#125;</span><br></pre></td></tr></table></figure></p>
<p>3ã€Map è½¬ä¸ºå¯¹è±¡<br>å¦‚æœæ‰€æœ‰ Map çš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥æ— æŸåœ°è½¬ä¸ºå¯¹è±¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> strMapToObj(strMap) &#123;</span><br><span class="line">  <span class="built_in">let</span> obj = Object.create(null);</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">let</span> [k,v] of strMap) &#123;</span><br><span class="line">    obj[k] = v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const myMap = new Map()</span><br><span class="line">  .<span class="built_in">set</span>(<span class="string">'yes'</span>, <span class="literal">true</span>)</span><br><span class="line">  .<span class="built_in">set</span>(<span class="string">'no'</span>, <span class="literal">false</span>);</span><br><span class="line">strMapToObj(myMap)</span><br><span class="line">// &#123; yes: <span class="literal">true</span>, no: <span class="literal">false</span> &#125;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæœ‰éå­—ç¬¦ä¸²çš„é”®åï¼Œé‚£ä¹ˆè¿™ä¸ªé”®åä¼šè¢«è½¬æˆå­—ç¬¦ä¸²ï¼Œå†ä½œä¸ºå¯¹è±¡çš„é”®åã€‚</p>
<p>4ã€å¯¹è±¡è½¬ä¸º Map<br>å¯¹è±¡è½¬ä¸º Map å¯ä»¥é€šè¿‡Object.entries()ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> obj = &#123;<span class="string">"a"</span>:1, <span class="string">"b"</span>:2&#125;;</span><br><span class="line"><span class="built_in">let</span> map = new Map(Object.entries(obj));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªè½¬æ¢å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> objToStrMap(obj) &#123;</span><br><span class="line">  <span class="built_in">let</span> strMap = new Map();</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">let</span> k of Object.keys(obj)) &#123;</span><br><span class="line">    strMap.set(k, obj[k]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> strMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objToStrMap(&#123;yes: <span class="literal">true</span>, no: <span class="literal">false</span>&#125;)</span><br><span class="line">// Map &#123;<span class="string">"yes"</span> =&gt; <span class="literal">true</span>, <span class="string">"no"</span> =&gt; <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>5ã€Map è½¬ä¸º JSON<br>Map è½¬ä¸º JSON è¦åŒºåˆ†ä¸¤ç§æƒ…å†µ:<br>ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMap çš„é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºå¯¹è±¡ JSONã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> strMapToJson(strMap) &#123;</span><br><span class="line">  <span class="built_in">return</span> JSON.stringify(strMapToObj(strMap));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> myMap = new Map().<span class="built_in">set</span>(<span class="string">'yes'</span>, <span class="literal">true</span>).<span class="built_in">set</span>(<span class="string">'no'</span>, <span class="literal">false</span>);</span><br><span class="line">strMapToJson(myMap)</span><br><span class="line">// <span class="string">'&#123;"yes":true,"no":false&#125;'</span></span><br></pre></td></tr></table></figure></p>
<p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMap çš„é”®åæœ‰éå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºæ•°ç»„ JSONã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> mapToArrayJson(map) &#123;</span><br><span class="line">  <span class="built_in">return</span> JSON.stringify([...map]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> myMap = new Map().<span class="built_in">set</span>(<span class="literal">true</span>, 7).<span class="built_in">set</span>(&#123;foo: 3&#125;, [<span class="string">'abc'</span>]);</span><br><span class="line">mapToArrayJson(myMap)</span><br><span class="line">// <span class="string">'[[true,7],[&#123;"foo":3&#125;,["abc"]]]'</span></span><br></pre></td></tr></table></figure></p>
<p>6ã€JSON è½¬ä¸º Map</p>
<p>JSON è½¬ä¸º Mapï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> jsonToStrMap(jsonStr) &#123;</span><br><span class="line">  <span class="built_in">return</span> objToStrMap(JSON.parse(jsonStr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonToStrMap(<span class="string">'&#123;"yes": true, "no": false&#125;'</span>)</span><br><span class="line">// Map &#123;<span class="string">'yes'</span> =&gt; <span class="literal">true</span>, <span class="string">'no'</span> =&gt; <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ•´ä¸ª JSON å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªæ•°ç»„æˆå‘˜æœ¬èº«ï¼Œåˆæ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæˆå‘˜çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå®ƒå¯ä»¥ä¸€ä¸€å¯¹åº”åœ°è½¬ä¸º Mapã€‚è¿™å¾€å¾€æ˜¯ Map è½¬ä¸ºæ•°ç»„ JSON çš„é€†æ“ä½œã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> jsonToMap(jsonStr) &#123;</span><br><span class="line">  <span class="built_in">return</span> new Map(JSON.parse(jsonStr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonToMap(<span class="string">'[[true,7],[&#123;"foo":3&#125;,["abc"]]]'</span>)</span><br><span class="line">// Map &#123;<span class="literal">true</span> =&gt; 7, Object &#123;foo: 3&#125; =&gt; [<span class="string">'abc'</span>]&#125;</span><br></pre></td></tr></table></figure></p>

        <div>
            <ul class="tags-category-list"><li class="tags-category-list-item"><a class="tags-category-list-link" href="/tags/ES6/">ES6</a></li></ul>
        </div>
        <div class="bottom-line"></div>
        
    <nav id="article-nav">
        
            <a href="/2020/12/29/Reactç”Ÿå‘½å‘¨æœŸ/" id="article-nav-newer" class="article-nav-link-wrap">
        <span class="article-nav-title">
            
                ç”Ÿå‘½å‘¨æœŸ
            
        </span>
                <strong class="article-nav-caption">&gt;</strong>
            </a>
        
        
            <a href="/2020/10/25/ES6/" id="article-nav-older" class="article-nav-link-wrap">
                <strong class="article-nav-caption">&lt;</strong>
                <span class="article-nav-title">
                    
                        ES6ï¼ˆä¸€ï¼‰
                </span>
                
            </a>
        
    </nav>


        
    </article>
    <div id="toc">
        
            <h2>æ–‡ç« ç›®å½•</h2>
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#ğŸŒ´-Set-å’Œ-WeakSetæ•°æ®ç»“æ„"><span class="toc-number">1.</span> <span class="toc-text">ğŸŒ´ Set å’Œ WeakSetæ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ğŸ‘‰-Setï¼š"><span class="toc-number">1.1.</span> <span class="toc-text">ğŸ‘‰ Setï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WeakSet"><span class="toc-number">1.2.</span> <span class="toc-text">WeakSet</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ğŸŒ´-Map-å’Œ-WeakMapæ•°æ®ç»“æ„"><span class="toc-number">2.</span> <span class="toc-text">ğŸŒ´ Map å’Œ WeakMapæ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Map"><span class="toc-number">2.1.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><span class="toc-number">2.2.</span> <span class="toc-text">å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#éå†æ–¹æ³•"><span class="toc-number">2.3.</span> <span class="toc-text">éå†æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><span class="toc-number">2.4.</span> <span class="toc-text">ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</span></a></li></ol></li></ol>
        
    </div>
</div>

    </div>
</div>
<footer id="footer">
     <div id="copyright">&copy; I&#39;m xiedandan  2021</div>
     
             <!-- ä¸è’œå­ç»Ÿè®¡ -->
             <span id="busuanzi_container_site_pv">
                     æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv" style='color:#17a167'></span>æ¬¡
             </span>
             <span class="post-meta-divider">|</span>
             <span id="busuanzi_container_site_uv">
                     æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"  style='color:#17a167'></span>äºº
             </span>
             <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
       
    <div id="theme">
        Powered by <a href="http://hexo.io">Hexo</a>. Theme by <a href="https://github.com/markyong/hexo-theme-stage">Stage</a>
    </div>
</footer>
<script src="/lib/js/waterrippleeffect.min.js"></script>
<script src="/js/header-bg.main.js"></script>

    <script src="/lib/js/smooth-scroll.min.js"></script>
    <script src="/js/toc.main.js"></script>

</body>
</html>
