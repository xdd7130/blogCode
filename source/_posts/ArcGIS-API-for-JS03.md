---
title: ArcGIS Server之发布要素服务
date: 2019-08-05 15:02:49
categories:
- ArcGIS
tags: [ArcGIS API for JS]
---
### 什么是要素服务？
要素服务可用来通过 Internet 提供要素，并提供显示要素时所要使用的符号系统。之后，客户端可执行查询操作以获取要素，并执行相应的编辑操作。要素服务提供了可用于提高客户端编辑体验的模板。此外，要素服务也可以对关系类和非空间表中的数据进行查询和编辑。
简单的说，要素服务的数据是通过ArcSDE将数据储存在数据库中，当客户端请求要素服务时，服务器从数据库中读取数据生成图片，将图片返还给客户端。
#### 要素服务的优点

要素服务由于数据是储存在数据库中，所以实现的功能多。例如：客户端对服务中的要素进行增删改查，要素服务可以进行渲染，改变图层的颜色

#### 要素服务数据要求
1、所有数据必须来自单个 ArcSDE 地理数据库。
2、所有数据必须通过地理数据库注册。
3、如果要允许编辑数据，将需要 ArcSDE 数据的写入权限。使用 OS 身份验证时，必须向 ArcGIS 4、Server 帐户授予这些权限。
5、支持版本化和未版本化数据；但是，如果需要使用服务编辑非简单类型（例如，网络边），则需要进行版本化。
### 发布要素服务
发布要素服务一般分为以下几个步骤：

1、准备一个 ArcSDE 地理数据库（本实例准备的是SQL Server2008 R2数据库）
2、创建一个数据库，并将其升级为地理数据库
3、将数据存储到SDE数据库中，并设置数据的属性
4、将SDE数据库注册到ArcGIS Server，并发布服务。
#### 准备一个 ArcSDE 地理数据库
1、安装SQL Server2008 R2数据库。
2、若服务器安装了ArcGIS Desktop,那么便不需要单独安装ArcSDE，如果服务器没有安装ArcGIS Desktop，可以选择安装ArcGIS Desktop或者ArcSDE。
3、若Linux操作系统，只能单独安装ArcSDE软件
#### 创建一个数据库，并将其升级为地理数据库
安装完成后 SQL Server2008 R2后，创建一个mydb数据库
![01.png](01.png)
打开ArcCatalog连接mydb数据库
![02.png](02.png)
>注：实例名便是数据库中的Server name（一定要对应），然后输入用户名，密码，最后选择我们刚刚创建的数据库mydb

点击确定，出现我们刚刚创建的数据库localhost. sde
![03.png](03.png)

将mydb数据库升级为地理数据库
右击localhost. sde->启用地理数据库，弹出该画面
![04.png](04.png)
注：授权文件为ArcGIS Server授权文件（ecp文件）

#### 将数据存储到SDE数据库中，并设置数据的属性
将数据导入ArcSDE数据库:右键localhost.sde->导入->要素类（多个）
#### 将SDE数据库注册到ArcGIS Server，并发布服务。
1.将要发布的图层拖拽到ArcMap 
2.点击文件->共享为->服务->发布服务 
3.注册数据库到ArcGIS Server

点击功能选择Feature Access点击分析
![05.png](05.png)
出现错误：点击错误注册地里数据库
![06.png](06.png)
![07.png](07.png)
![08.png](08.png)
![09.png](09.png)
![10.png](10.png)